{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require('babel-runtime/helpers/createClass');\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require('babel-runtime/helpers/inherits');\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _libs = require('../../libs');\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\n(function () {\n  var enterModule = (typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal : require('react-hot-loader')).enterModule;\n  enterModule && enterModule(module);\n})();\n\nvar Tabs = function (_Component) {\n  (0, _inherits3.default)(Tabs, _Component);\n\n  function Tabs(props) {\n    (0, _classCallCheck3.default)(this, Tabs);\n\n    var _this = (0, _possibleConstructorReturn3.default)(this, (Tabs.__proto__ || Object.getPrototypeOf(Tabs)).call(this, props));\n\n    var children = props.children,\n        activeName = props.activeName,\n        value = props.value;\n    children = _react2.default.Children.toArray(children);\n    _this.state = {\n      children: children,\n      currentName: value || activeName || children[0].props.name,\n      barStyle: {},\n      navStyle: {\n        transform: ''\n      },\n      scrollable: false,\n      scrollNext: false,\n      scrollPrev: false\n    };\n    return _this;\n  }\n\n  (0, _createClass3.default)(Tabs, [{\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      this.calcBarStyle(true);\n      this.update();\n    }\n  }, {\n    key: 'componentDidUpdate',\n    value: function componentDidUpdate(prevProps, prevState) {\n      if (prevState.scrollable !== this.state.scrollable) {\n        this.scrollToActiveTab();\n      }\n    }\n  }, {\n    key: 'componentWillReceiveProps',\n    value: function componentWillReceiveProps(nextProps) {\n      var _this2 = this;\n\n      if (nextProps.activeName !== this.props.activeName) {\n        this.setState({\n          currentName: nextProps.activeName\n        }, function () {\n          return _this2.calcBarStyle();\n        });\n      }\n\n      if (nextProps.value !== this.props.value) {\n        this.setState({\n          currentName: nextProps.value\n        }, function () {\n          return _this2.calcBarStyle();\n        });\n      }\n\n      if (nextProps.children !== this.props.children) {\n        this.setState({\n          children: _react2.default.Children.toArray(nextProps.children)\n        }, function () {\n          _this2.update();\n\n          _this2.calcBarStyle();\n        });\n      }\n    }\n  }, {\n    key: 'handleTabAdd',\n    value: function handleTabAdd() {\n      var _props = this.props,\n          onTabAdd = _props.onTabAdd,\n          onTabEdit = _props.onTabEdit;\n      onTabEdit && onTabEdit('add');\n      onTabAdd && onTabAdd();\n    }\n  }, {\n    key: 'handleTabRemove',\n    value: function handleTabRemove(tab, index, e) {\n      var _state = this.state,\n          children = _state.children,\n          currentName = _state.currentName;\n      var _props2 = this.props,\n          onTabRemove = _props2.onTabRemove,\n          onTabEdit = _props2.onTabEdit;\n      e.stopPropagation();\n\n      if (children[index].props.name === currentName) {\n        var nextChild = children[index + 1];\n        var prevChild = children[index - 1];\n        this.setState({\n          currentName: nextChild ? nextChild.props.name : prevChild ? prevChild.props.name : '-1'\n        });\n      }\n\n      children.splice(index, 1);\n      this.setState({\n        children: children\n      }, function () {\n        onTabEdit && onTabEdit('remove', tab);\n        onTabRemove && onTabRemove(tab, e);\n      });\n    }\n  }, {\n    key: 'handleTabClick',\n    value: function handleTabClick(tab, e) {\n      var _this3 = this;\n\n      if (tab.props.disabled) {\n        return false;\n      }\n\n      this.setState({\n        currentName: tab.props.name\n      }, function () {\n        var onTabClick = _this3.props.onTabClick;\n\n        _this3.calcBarStyle();\n\n        _this3.scrollToActiveTab();\n\n        onTabClick && onTabClick(tab, e);\n      });\n    }\n  }, {\n    key: 'calcBarStyle',\n    value: function calcBarStyle(firstRendering) {\n      var _this4 = this;\n\n      if (this.props.type || !this.tabs.length) return {};\n      var style = {};\n      var offset = 0;\n      var tabWidth = 0;\n      var children = this.state.children instanceof Array ? this.state.children : [this.state.children];\n      children.every(function (item, index) {\n        var $el = _this4.tabs[index];\n\n        if (item.props.name !== _this4.state.currentName) {\n          offset += $el.clientWidth;\n          return true;\n        } else {\n          tabWidth = $el.clientWidth;\n          return false;\n        }\n      });\n      style.width = tabWidth + 'px';\n      style.transform = 'translateX(' + offset + 'px)';\n\n      if (!firstRendering) {\n        style.transition = 'transform .3s cubic-bezier(.645,.045,.355,1), -webkit-transform .3s cubic-bezier(.645,.045,.355,1)';\n      }\n\n      this.setState({\n        barStyle: style\n      });\n    }\n  }, {\n    key: 'scrollPrev',\n    value: function scrollPrev() {\n      var containerWidth = this.refs.navScroll.offsetWidth;\n      var currentOffset = this.getCurrentScrollOffset();\n      if (!currentOffset) return;\n      var newOffset = currentOffset > containerWidth ? currentOffset - containerWidth : 0;\n      this.setOffset(newOffset);\n    }\n  }, {\n    key: 'scrollNext',\n    value: function scrollNext() {\n      var navWidth = this.refs.nav.offsetWidth;\n      var containerWidth = this.refs.navScroll.offsetWidth;\n      var currentOffset = this.getCurrentScrollOffset();\n      if (navWidth - currentOffset <= containerWidth) return;\n      var newOffset = navWidth - currentOffset > containerWidth * 2 ? currentOffset + containerWidth : navWidth - containerWidth;\n      this.setOffset(newOffset);\n    }\n  }, {\n    key: 'scrollToActiveTab',\n    value: function scrollToActiveTab() {\n      if (!this.state.scrollable) return;\n      var nav = this.refs.nav;\n      var activeTab = nav.querySelector('.is-active');\n      var navScroll = this.refs.navScroll;\n      var activeTabBounding = activeTab.getBoundingClientRect();\n      var navScrollBounding = navScroll.getBoundingClientRect();\n      var navBounding = nav.getBoundingClientRect();\n      var currentOffset = this.getCurrentScrollOffset();\n      var newOffset = currentOffset;\n\n      if (activeTabBounding.left < navScrollBounding.left) {\n        newOffset = currentOffset - (navScrollBounding.left - activeTabBounding.left);\n      }\n\n      if (activeTabBounding.right > navScrollBounding.right) {\n        newOffset = currentOffset + activeTabBounding.right - navScrollBounding.right;\n      }\n\n      if (navBounding.right < navScrollBounding.right) {\n        newOffset = nav.offsetWidth - navScrollBounding.width;\n      }\n\n      this.setOffset(Math.max(newOffset, 0));\n    }\n  }, {\n    key: 'getCurrentScrollOffset',\n    value: function getCurrentScrollOffset() {\n      var navStyle = this.state.navStyle;\n      return navStyle.transform ? Number(navStyle.transform.match(/translateX\\(-(\\d+(\\.\\d+)*)px\\)/)[1]) : 0;\n    }\n  }, {\n    key: 'setOffset',\n    value: function setOffset(value) {\n      this.setState({\n        navStyle: {\n          transform: 'translateX(-' + value + 'px)'\n        }\n      });\n    }\n  }, {\n    key: 'update',\n    value: function update() {\n      var navWidth = this.refs.nav.offsetWidth;\n      var containerWidth = this.refs.navScroll.offsetWidth;\n      var currentOffset = this.getCurrentScrollOffset();\n\n      if (containerWidth < navWidth) {\n        var _currentOffset = this.getCurrentScrollOffset();\n\n        this.setState({\n          scrollable: true,\n          scrollablePrev: _currentOffset,\n          scrollableNext: _currentOffset + containerWidth < navWidth\n        });\n\n        if (navWidth - _currentOffset < containerWidth) {\n          this.setOffset(navWidth - containerWidth);\n        }\n      } else {\n        this.setState({\n          scrollable: false\n        });\n\n        if (currentOffset > 0) {\n          this.setOffset(0);\n        }\n      }\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _this5 = this;\n\n      var _state2 = this.state,\n          children = _state2.children,\n          currentName = _state2.currentName,\n          barStyle = _state2.barStyle,\n          navStyle = _state2.navStyle,\n          scrollable = _state2.scrollable,\n          scrollNext = _state2.scrollNext,\n          scrollPrev = _state2.scrollPrev;\n      var _props3 = this.props,\n          type = _props3.type,\n          addable = _props3.addable,\n          closable = _props3.closable,\n          editable = _props3.editable;\n      var tabsCls = this.classNames({\n        'el-tabs': true,\n        'el-tabs--card': type === 'card',\n        'el-tabs--border-card': type === 'border-card'\n      });\n      var addButton = editable || addable ? _react2.default.createElement('span', {\n        className: 'el-tabs__new-tab',\n        onClick: function onClick() {\n          return _this5.handleTabAdd();\n        }\n      }, _react2.default.createElement('i', {\n        className: 'el-icon-plus'\n      })) : null;\n      var scrollBtn = scrollable ? [_react2.default.createElement('span', {\n        key: 'el-tabs__nav-prev',\n        className: scrollPrev ? 'el-tabs__nav-prev' : 'el-tabs__nav-prev is-disabled',\n        onClick: function onClick() {\n          return _this5.scrollPrev();\n        }\n      }, _react2.default.createElement('i', {\n        className: 'el-icon-arrow-left'\n      })), _react2.default.createElement('span', {\n        key: 'el-tabs__nav-next',\n        className: scrollNext ? 'el-tabs__nav-next' : 'el-tabs__nav-next is-disabled',\n        onClick: function onClick() {\n          return _this5.scrollNext();\n        }\n      }, _react2.default.createElement('i', {\n        className: 'el-icon-arrow-right'\n      }))] : null;\n      this.tabs = [];\n      return _react2.default.createElement('div', {\n        style: this.style(),\n        className: this.className(tabsCls)\n      }, _react2.default.createElement('div', {\n        className: 'el-tabs__header'\n      }, addButton, _react2.default.createElement('div', {\n        className: scrollable ? 'el-tabs__nav-wrap is-scrollable' : 'el-tabs__nav-wrap'\n      }, scrollBtn, _react2.default.createElement('div', {\n        className: 'el-tabs__nav-scroll',\n        ref: 'navScroll'\n      }, _react2.default.createElement('div', {\n        className: 'el-tabs__nav',\n        ref: 'nav',\n        style: navStyle\n      }, _react2.default.Children.map(children, function (item, index) {\n        var _item$props = item.props,\n            name = _item$props.name,\n            label = _item$props.label,\n            disabled = _item$props.disabled;\n\n        var tabCls = _this5.classNames({\n          'el-tabs__item': true,\n          'is-active': name === currentName,\n          'is-disabled': disabled,\n          'is-closable': closable || item.props.closable\n        });\n\n        return _react2.default.createElement('div', {\n          key: 'el-tabs__item-' + index,\n          ref: function ref(tab) {\n            return tab && _this5.tabs.push(tab);\n          },\n          name: name,\n          className: tabCls,\n          onClick: function onClick(e) {\n            return _this5.handleTabClick(item, e);\n          }\n        }, label, _react2.default.createElement(_libs.View, {\n          show: editable || closable || item.props.closable\n        }, _react2.default.createElement('span', {\n          className: 'el-icon-close',\n          onClick: function onClick(e) {\n            return _this5.handleTabRemove(item, index, e);\n          }\n        })));\n      }), _react2.default.createElement(_libs.View, {\n        show: !type\n      }, _react2.default.createElement('div', {\n        className: 'el-tabs__active-bar',\n        style: barStyle\n      })))))), _react2.default.createElement('div', {\n        className: 'el-tabs__content'\n      }, _react2.default.Children.map(children, function (item) {\n        var name = item.props.name; // let transitionName = '';\n        //\n        // if (name === currentName) {\n        //   transitionName = 'slideInRight';\n        // }\n\n        return _react2.default.createElement(_libs.View, {\n          show: name === currentName\n        }, item);\n      })));\n    }\n  }, {\n    key: '__reactstandin__regenerateByEval',\n    // @ts-ignore\n    value: function __reactstandin__regenerateByEval(key, code) {\n      // @ts-ignore\n      this[key] = eval(code);\n    }\n  }]);\n  return Tabs;\n}(_libs.Component);\n\nvar _default = Tabs;\nexports.default = _default;\nTabs.propTypes = {\n  type: _libs.PropTypes.oneOf(['card', 'border-card']),\n  activeName: _libs.PropTypes.string,\n  value: _libs.PropTypes.string,\n  closable: _libs.PropTypes.bool,\n  addable: _libs.PropTypes.bool,\n  editable: _libs.PropTypes.bool,\n  onTabClick: _libs.PropTypes.func,\n  onTabRemove: _libs.PropTypes.func,\n  onTabAdd: _libs.PropTypes.func,\n  onTabEdit: _libs.PropTypes.func\n};\nTabs.defaultProps = {\n  closable: false,\n  addable: false,\n  edidable: false\n};\n;\n\n(function () {\n  var reactHotLoader = (typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal : require('react-hot-loader')).default;\n\n  if (!reactHotLoader) {\n    return;\n  }\n\n  reactHotLoader.register(Tabs, 'Tabs', 'src/tabs/Tabs.jsx');\n  reactHotLoader.register(_default, 'default', 'src/tabs/Tabs.jsx');\n})();\n\n;\n\n(function () {\n  var leaveModule = (typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal : require('react-hot-loader')).leaveModule;\n  leaveModule && leaveModule(module);\n})();","map":{"version":3,"sources":["/home/flo/Projects/react/Holirate/node_modules/element-react/dist/npm/es5/src/tabs/Tabs.js"],"names":["Object","defineProperty","exports","value","_classCallCheck2","require","_classCallCheck3","_interopRequireDefault","_createClass2","_createClass3","_possibleConstructorReturn2","_possibleConstructorReturn3","_inherits2","_inherits3","_react","_react2","_libs","obj","__esModule","default","enterModule","reactHotLoaderGlobal","module","Tabs","_Component","props","_this","__proto__","getPrototypeOf","call","children","activeName","Children","toArray","state","currentName","name","barStyle","navStyle","transform","scrollable","scrollNext","scrollPrev","key","componentDidMount","calcBarStyle","update","componentDidUpdate","prevProps","prevState","scrollToActiveTab","componentWillReceiveProps","nextProps","_this2","setState","handleTabAdd","_props","onTabAdd","onTabEdit","handleTabRemove","tab","index","e","_state","_props2","onTabRemove","stopPropagation","nextChild","prevChild","splice","handleTabClick","_this3","disabled","onTabClick","firstRendering","_this4","type","tabs","length","style","offset","tabWidth","Array","every","item","$el","clientWidth","width","transition","containerWidth","refs","navScroll","offsetWidth","currentOffset","getCurrentScrollOffset","newOffset","setOffset","navWidth","nav","activeTab","querySelector","activeTabBounding","getBoundingClientRect","navScrollBounding","navBounding","left","right","Math","max","Number","match","_currentOffset","scrollablePrev","scrollableNext","render","_this5","_state2","_props3","addable","closable","editable","tabsCls","classNames","addButton","createElement","className","onClick","scrollBtn","ref","map","_item$props","label","tabCls","push","View","show","__reactstandin__regenerateByEval","code","eval","Component","_default","propTypes","PropTypes","oneOf","string","bool","func","defaultProps","edidable","reactHotLoader","register","leaveModule"],"mappings":"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","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require('babel-runtime/helpers/createClass');\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require('babel-runtime/helpers/inherits');\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _libs = require('../../libs');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n(function () {\n  var enterModule = (typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal : require('react-hot-loader')).enterModule;\n  enterModule && enterModule(module);\n})();\n\nvar Tabs = function (_Component) {\n  (0, _inherits3.default)(Tabs, _Component);\n\n  function Tabs(props) {\n    (0, _classCallCheck3.default)(this, Tabs);\n\n    var _this = (0, _possibleConstructorReturn3.default)(this, (Tabs.__proto__ || Object.getPrototypeOf(Tabs)).call(this, props));\n\n    var children = props.children,\n        activeName = props.activeName,\n        value = props.value;\n\n\n    children = _react2.default.Children.toArray(children);\n\n    _this.state = {\n      children: children,\n      currentName: value || activeName || children[0].props.name,\n      barStyle: {},\n      navStyle: {\n        transform: ''\n      },\n      scrollable: false,\n      scrollNext: false,\n      scrollPrev: false\n    };\n    return _this;\n  }\n\n  (0, _createClass3.default)(Tabs, [{\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      this.calcBarStyle(true);\n      this.update();\n    }\n  }, {\n    key: 'componentDidUpdate',\n    value: function componentDidUpdate(prevProps, prevState) {\n      if (prevState.scrollable !== this.state.scrollable) {\n        this.scrollToActiveTab();\n      }\n    }\n  }, {\n    key: 'componentWillReceiveProps',\n    value: function componentWillReceiveProps(nextProps) {\n      var _this2 = this;\n\n      if (nextProps.activeName !== this.props.activeName) {\n        this.setState({\n          currentName: nextProps.activeName\n        }, function () {\n          return _this2.calcBarStyle();\n        });\n      }\n\n      if (nextProps.value !== this.props.value) {\n        this.setState({\n          currentName: nextProps.value\n        }, function () {\n          return _this2.calcBarStyle();\n        });\n      }\n\n      if (nextProps.children !== this.props.children) {\n        this.setState({\n          children: _react2.default.Children.toArray(nextProps.children)\n        }, function () {\n          _this2.update();\n          _this2.calcBarStyle();\n        });\n      }\n    }\n  }, {\n    key: 'handleTabAdd',\n    value: function handleTabAdd() {\n      var _props = this.props,\n          onTabAdd = _props.onTabAdd,\n          onTabEdit = _props.onTabEdit;\n\n\n      onTabEdit && onTabEdit('add');\n      onTabAdd && onTabAdd();\n    }\n  }, {\n    key: 'handleTabRemove',\n    value: function handleTabRemove(tab, index, e) {\n      var _state = this.state,\n          children = _state.children,\n          currentName = _state.currentName;\n      var _props2 = this.props,\n          onTabRemove = _props2.onTabRemove,\n          onTabEdit = _props2.onTabEdit;\n\n\n      e.stopPropagation();\n\n      if (children[index].props.name === currentName) {\n        var nextChild = children[index + 1];\n        var prevChild = children[index - 1];\n\n        this.setState({\n          currentName: nextChild ? nextChild.props.name : prevChild ? prevChild.props.name : '-1'\n        });\n      }\n\n      children.splice(index, 1);\n\n      this.setState({\n        children: children\n      }, function () {\n        onTabEdit && onTabEdit('remove', tab);\n        onTabRemove && onTabRemove(tab, e);\n      });\n    }\n  }, {\n    key: 'handleTabClick',\n    value: function handleTabClick(tab, e) {\n      var _this3 = this;\n\n      if (tab.props.disabled) {\n        return false;\n      }\n\n      this.setState({\n        currentName: tab.props.name\n      }, function () {\n        var onTabClick = _this3.props.onTabClick;\n\n\n        _this3.calcBarStyle();\n        _this3.scrollToActiveTab();\n        onTabClick && onTabClick(tab, e);\n      });\n    }\n  }, {\n    key: 'calcBarStyle',\n    value: function calcBarStyle(firstRendering) {\n      var _this4 = this;\n\n      if (this.props.type || !this.tabs.length) return {};\n\n      var style = {};\n      var offset = 0;\n      var tabWidth = 0;\n      var children = this.state.children instanceof Array ? this.state.children : [this.state.children];\n\n      children.every(function (item, index) {\n        var $el = _this4.tabs[index];\n\n        if (item.props.name !== _this4.state.currentName) {\n          offset += $el.clientWidth;\n          return true;\n        } else {\n          tabWidth = $el.clientWidth;\n          return false;\n        }\n      });\n\n      style.width = tabWidth + 'px';\n      style.transform = 'translateX(' + offset + 'px)';\n\n      if (!firstRendering) {\n        style.transition = 'transform .3s cubic-bezier(.645,.045,.355,1), -webkit-transform .3s cubic-bezier(.645,.045,.355,1)';\n      }\n\n      this.setState({\n        barStyle: style\n      });\n    }\n  }, {\n    key: 'scrollPrev',\n    value: function scrollPrev() {\n      var containerWidth = this.refs.navScroll.offsetWidth;\n      var currentOffset = this.getCurrentScrollOffset();\n      if (!currentOffset) return;\n      var newOffset = currentOffset > containerWidth ? currentOffset - containerWidth : 0;\n      this.setOffset(newOffset);\n    }\n  }, {\n    key: 'scrollNext',\n    value: function scrollNext() {\n      var navWidth = this.refs.nav.offsetWidth;\n      var containerWidth = this.refs.navScroll.offsetWidth;\n      var currentOffset = this.getCurrentScrollOffset();\n      if (navWidth - currentOffset <= containerWidth) return;\n      var newOffset = navWidth - currentOffset > containerWidth * 2 ? currentOffset + containerWidth : navWidth - containerWidth;\n      this.setOffset(newOffset);\n    }\n  }, {\n    key: 'scrollToActiveTab',\n    value: function scrollToActiveTab() {\n      if (!this.state.scrollable) return;\n\n      var nav = this.refs.nav;\n      var activeTab = nav.querySelector('.is-active');\n      var navScroll = this.refs.navScroll;\n      var activeTabBounding = activeTab.getBoundingClientRect();\n      var navScrollBounding = navScroll.getBoundingClientRect();\n      var navBounding = nav.getBoundingClientRect();\n      var currentOffset = this.getCurrentScrollOffset();\n      var newOffset = currentOffset;\n\n      if (activeTabBounding.left < navScrollBounding.left) {\n        newOffset = currentOffset - (navScrollBounding.left - activeTabBounding.left);\n      }\n\n      if (activeTabBounding.right > navScrollBounding.right) {\n        newOffset = currentOffset + activeTabBounding.right - navScrollBounding.right;\n      }\n\n      if (navBounding.right < navScrollBounding.right) {\n        newOffset = nav.offsetWidth - navScrollBounding.width;\n      }\n\n      this.setOffset(Math.max(newOffset, 0));\n    }\n  }, {\n    key: 'getCurrentScrollOffset',\n    value: function getCurrentScrollOffset() {\n      var navStyle = this.state.navStyle;\n\n      return navStyle.transform ? Number(navStyle.transform.match(/translateX\\(-(\\d+(\\.\\d+)*)px\\)/)[1]) : 0;\n    }\n  }, {\n    key: 'setOffset',\n    value: function setOffset(value) {\n      this.setState({\n        navStyle: {\n          transform: 'translateX(-' + value + 'px)'\n        }\n      });\n    }\n  }, {\n    key: 'update',\n    value: function update() {\n      var navWidth = this.refs.nav.offsetWidth;\n      var containerWidth = this.refs.navScroll.offsetWidth;\n      var currentOffset = this.getCurrentScrollOffset();\n\n      if (containerWidth < navWidth) {\n        var _currentOffset = this.getCurrentScrollOffset();\n        this.setState({\n          scrollable: true,\n          scrollablePrev: _currentOffset,\n          scrollableNext: _currentOffset + containerWidth < navWidth\n        });\n\n        if (navWidth - _currentOffset < containerWidth) {\n          this.setOffset(navWidth - containerWidth);\n        }\n      } else {\n        this.setState({\n          scrollable: false\n        });\n\n        if (currentOffset > 0) {\n          this.setOffset(0);\n        }\n      }\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _this5 = this;\n\n      var _state2 = this.state,\n          children = _state2.children,\n          currentName = _state2.currentName,\n          barStyle = _state2.barStyle,\n          navStyle = _state2.navStyle,\n          scrollable = _state2.scrollable,\n          scrollNext = _state2.scrollNext,\n          scrollPrev = _state2.scrollPrev;\n      var _props3 = this.props,\n          type = _props3.type,\n          addable = _props3.addable,\n          closable = _props3.closable,\n          editable = _props3.editable;\n\n      var tabsCls = this.classNames({\n        'el-tabs': true,\n        'el-tabs--card': type === 'card',\n        'el-tabs--border-card': type === 'border-card'\n      });\n      var addButton = editable || addable ? _react2.default.createElement(\n        'span',\n        {\n          className: 'el-tabs__new-tab',\n          onClick: function onClick() {\n            return _this5.handleTabAdd();\n          }\n        },\n        _react2.default.createElement('i', { className: 'el-icon-plus' })\n      ) : null;\n      var scrollBtn = scrollable ? [_react2.default.createElement(\n        'span',\n        {\n          key: 'el-tabs__nav-prev',\n          className: scrollPrev ? 'el-tabs__nav-prev' : 'el-tabs__nav-prev is-disabled',\n          onClick: function onClick() {\n            return _this5.scrollPrev();\n          }\n        },\n        _react2.default.createElement('i', { className: 'el-icon-arrow-left' })\n      ), _react2.default.createElement(\n        'span',\n        {\n          key: 'el-tabs__nav-next',\n          className: scrollNext ? 'el-tabs__nav-next' : 'el-tabs__nav-next is-disabled',\n          onClick: function onClick() {\n            return _this5.scrollNext();\n          }\n        },\n        _react2.default.createElement('i', { className: 'el-icon-arrow-right' })\n      )] : null;\n      this.tabs = [];\n\n      return _react2.default.createElement(\n        'div',\n        { style: this.style(), className: this.className(tabsCls) },\n        _react2.default.createElement(\n          'div',\n          { className: 'el-tabs__header' },\n          addButton,\n          _react2.default.createElement(\n            'div',\n            { className: scrollable ? 'el-tabs__nav-wrap is-scrollable' : 'el-tabs__nav-wrap' },\n            scrollBtn,\n            _react2.default.createElement(\n              'div',\n              { className: 'el-tabs__nav-scroll', ref: 'navScroll' },\n              _react2.default.createElement(\n                'div',\n                { className: 'el-tabs__nav', ref: 'nav', style: navStyle },\n                _react2.default.Children.map(children, function (item, index) {\n                  var _item$props = item.props,\n                      name = _item$props.name,\n                      label = _item$props.label,\n                      disabled = _item$props.disabled;\n\n                  var tabCls = _this5.classNames({\n                    'el-tabs__item': true,\n                    'is-active': name === currentName,\n                    'is-disabled': disabled,\n                    'is-closable': closable || item.props.closable\n                  });\n\n                  return _react2.default.createElement(\n                    'div',\n                    {\n                      key: 'el-tabs__item-' + index, ref: function ref(tab) {\n                        return tab && _this5.tabs.push(tab);\n                      },\n                      name: name,\n                      className: tabCls, onClick: function onClick(e) {\n                        return _this5.handleTabClick(item, e);\n                      }\n                    },\n                    label,\n                    _react2.default.createElement(\n                      _libs.View,\n                      { show: editable || closable || item.props.closable },\n                      _react2.default.createElement('span', { className: 'el-icon-close', onClick: function onClick(e) {\n                          return _this5.handleTabRemove(item, index, e);\n                        } })\n                    )\n                  );\n                }),\n                _react2.default.createElement(\n                  _libs.View,\n                  { show: !type },\n                  _react2.default.createElement('div', { className: 'el-tabs__active-bar', style: barStyle })\n                )\n              )\n            )\n          )\n        ),\n        _react2.default.createElement(\n          'div',\n          { className: 'el-tabs__content' },\n          _react2.default.Children.map(children, function (item) {\n            var name = item.props.name;\n\n            // let transitionName = '';\n            //\n            // if (name === currentName) {\n            //   transitionName = 'slideInRight';\n            // }\n\n            return _react2.default.createElement(\n              _libs.View,\n              { show: name === currentName },\n              item\n            );\n          })\n        )\n      );\n    }\n  }, {\n    key: '__reactstandin__regenerateByEval',\n    // @ts-ignore\n    value: function __reactstandin__regenerateByEval(key, code) {\n      // @ts-ignore\n      this[key] = eval(code);\n    }\n  }]);\n  return Tabs;\n}(_libs.Component);\n\nvar _default = Tabs;\nexports.default = _default;\n\n\nTabs.propTypes = {\n  type: _libs.PropTypes.oneOf(['card', 'border-card']),\n  activeName: _libs.PropTypes.string,\n  value: _libs.PropTypes.string,\n  closable: _libs.PropTypes.bool,\n  addable: _libs.PropTypes.bool,\n  editable: _libs.PropTypes.bool,\n  onTabClick: _libs.PropTypes.func,\n  onTabRemove: _libs.PropTypes.func,\n  onTabAdd: _libs.PropTypes.func,\n  onTabEdit: _libs.PropTypes.func\n};\n\nTabs.defaultProps = {\n  closable: false,\n  addable: false,\n  edidable: false\n};\n;\n\n(function () {\n  var reactHotLoader = (typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal : require('react-hot-loader')).default;\n\n  if (!reactHotLoader) {\n    return;\n  }\n\n  reactHotLoader.register(Tabs, 'Tabs', 'src/tabs/Tabs.jsx');\n  reactHotLoader.register(_default, 'default', 'src/tabs/Tabs.jsx');\n})();\n\n;\n\n(function () {\n  var leaveModule = (typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal : require('react-hot-loader')).leaveModule;\n  leaveModule && leaveModule(module);\n})();"]},"metadata":{},"sourceType":"script"}