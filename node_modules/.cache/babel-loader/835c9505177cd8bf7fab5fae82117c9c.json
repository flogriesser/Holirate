{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require('babel-runtime/helpers/createClass');\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require('babel-runtime/helpers/inherits');\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactDom = require('react-dom');\n\nvar _reactDom2 = _interopRequireDefault(_reactDom);\n\nvar _reactClickOutside = require('react-click-outside');\n\nvar _reactClickOutside2 = _interopRequireDefault(_reactClickOutside);\n\nvar _throttleDebounce = require('throttle-debounce');\n\nvar _popper = require('popper.js');\n\nvar _popper2 = _interopRequireDefault(_popper);\n\nvar _libs = require('../../libs');\n\nvar _Menu = require('./Menu');\n\nvar _Menu2 = _interopRequireDefault(_Menu);\n\nvar _input = require('../input');\n\nvar _input2 = _interopRequireDefault(_input);\n\nvar _locale = require('../locale');\n\nvar _locale2 = _interopRequireDefault(_locale);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\n(function () {\n  var enterModule = (typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal : require('react-hot-loader')).enterModule;\n  enterModule && enterModule(module);\n})();\n\nvar Cascader = function (_Component) {\n  (0, _inherits3.default)(Cascader, _Component);\n\n  function Cascader(props) {\n    (0, _classCallCheck3.default)(this, Cascader);\n\n    var _this = (0, _possibleConstructorReturn3.default)(this, (Cascader.__proto__ || Object.getPrototypeOf(Cascader)).call(this, props));\n\n    _this.state = {\n      currentValue: props.value,\n      menu: null,\n      menuVisible: false,\n      inputHover: false,\n      inputValue: '',\n      flatOptions: _this.flattenOptions(props.options)\n    };\n    _this.debouncedInputChange = (0, _throttleDebounce.debounce)(props.debounce, function () {\n      var value = _this.state.inputValue;\n\n      var before = _this.props.beforeFilter(value);\n\n      if (before && before.then) {\n        _this.state.menu.setState({\n          options: [{\n            __IS__FLAT__OPTIONS: true,\n            label: _locale2.default.t('el.cascader.loading'),\n            value: '',\n            disabled: true\n          }]\n        });\n\n        before.then(function () {\n          _this.handleInputChange(value);\n        });\n      } else {\n        _this.handleInputChange(value);\n      }\n    });\n    return _this;\n  }\n\n  (0, _createClass3.default)(Cascader, [{\n    key: 'getChildContext',\n    value: function getChildContext() {\n      return {\n        component: this\n      };\n    }\n  }, {\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      this.input = _reactDom2.default.findDOMNode(this.refs.input);\n    }\n  }, {\n    key: 'componentWillReceiveProps',\n    value: function componentWillReceiveProps(props) {\n      this.setState({\n        currentValue: props.value,\n        flatOptions: this.flattenOptions(props.options)\n      });\n      this.state.menu.setState({\n        options: props.options\n      });\n    }\n  }, {\n    key: 'componentDidUpdate',\n    value: function componentDidUpdate(props, state) {\n      var menuVisible = this.state.menuVisible;\n\n      if (menuVisible !== state.menuVisible) {\n        if (menuVisible) {\n          this.showMenu();\n\n          if (this.popperJS) {\n            this.popperJS.update();\n          } else {\n            this.popperJS = new _popper2.default(this.input, _reactDom2.default.findDOMNode(this.refs.menu), {\n              placement: 'bottom-start',\n              modifiers: {\n                computeStyle: {\n                  gpuAcceleration: false\n                }\n              }\n            });\n          }\n        } else {\n          this.hideMenu();\n\n          if (this.popperJS) {\n            this.popperJS.destroy();\n          }\n\n          delete this.popperJS;\n        }\n      }\n    }\n  }, {\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {\n      if (this.popperJS) {\n        this.popperJS.destroy();\n      }\n    }\n  }, {\n    key: 'placeholder',\n    value: function placeholder() {\n      return this.props.placeholder || _locale2.default.t('el.cascader.placeholder');\n    }\n  }, {\n    key: 'updatePopper',\n    value: function updatePopper() {\n      if (this.popperJS) {\n        this.popperJS.update();\n      }\n    }\n  }, {\n    key: 'initMenu',\n    value: function initMenu(menu) {\n      this.state.menu = menu;\n    }\n  }, {\n    key: 'showMenu',\n    value: function showMenu() {\n      this.state.menu.setState({\n        value: this.state.currentValue.slice(0),\n        visible: true,\n        options: this.props.options,\n        inputWidth: this.input.offsetWidth - 2\n      });\n    }\n  }, {\n    key: 'hideMenu',\n    value: function hideMenu() {\n      this.setState({\n        inputValue: ''\n      });\n\n      if (this.state.menu) {\n        this.state.menu.setState({\n          visible: false\n        });\n      }\n    }\n  }, {\n    key: 'handleActiveItemChange',\n    value: function handleActiveItemChange(value) {\n      this.updatePopper();\n\n      if (this.props.activeItemChange) {\n        this.props.activeItemChange(value);\n      }\n    }\n  }, {\n    key: 'handlePick',\n    value: function handlePick(value) {\n      var close = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n      this.setState({\n        currentValue: value\n      });\n\n      if (close) {\n        this.setState({\n          menuVisible: false\n        });\n      }\n\n      if (this.props.onChange) {\n        this.props.onChange(value);\n      }\n    }\n  }, {\n    key: 'handleInputChange',\n    value: function handleInputChange(value) {\n      var _this2 = this;\n\n      if (!this.state.menuVisible) return;\n      var flatOptions = this.state.flatOptions;\n\n      if (!value) {\n        this.state.menu.setState({\n          options: this.props.options\n        });\n        return;\n      }\n\n      var filteredFlatOptions = flatOptions.filter(function (optionsStack) {\n        return optionsStack.some(function (option) {\n          return new RegExp(value, 'i').test(option[_this2.labelKey()]);\n        });\n      });\n\n      if (filteredFlatOptions.length > 0) {\n        filteredFlatOptions = filteredFlatOptions.map(function (optionStack) {\n          return {\n            __IS__FLAT__OPTIONS: true,\n            value: optionStack.map(function (item) {\n              return item[_this2.valueKey()];\n            }),\n            label: _this2.renderFilteredOptionLabel(value, optionStack)\n          };\n        });\n      } else {\n        filteredFlatOptions = [{\n          __IS__FLAT__OPTIONS: true,\n          label: _locale2.default.t('el.cascader.noMatch'),\n          value: '',\n          disabled: true\n        }];\n      }\n\n      this.state.menu.setState({\n        options: filteredFlatOptions\n      });\n    }\n  }, {\n    key: 'renderFilteredOptionLabel',\n    value: function renderFilteredOptionLabel(inputValue, optionsStack) {\n      var _this3 = this;\n\n      return optionsStack.map(function (option, index) {\n        var label = option[_this3.labelKey()];\n\n        var keywordIndex = label.toLowerCase().indexOf(inputValue.toLowerCase());\n        var labelPart = label.slice(keywordIndex, inputValue.length + keywordIndex);\n        var node = keywordIndex > -1 ? _this3.highlightKeyword(label, labelPart) : label;\n        return index === 0 ? node : [' / ', node];\n      });\n    }\n  }, {\n    key: 'highlightKeyword',\n    value: function highlightKeyword(label, keyword) {\n      return label.split(keyword).map(function (node, index) {\n        return index === 0 ? node : [_react2.default.createElement('span', {\n          className: 'el-cascader-menu__item__keyword'\n        }, keyword), node];\n      });\n    }\n  }, {\n    key: 'flattenOptions',\n    value: function flattenOptions(options) {\n      var _this4 = this;\n\n      var ancestor = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n      var flatOptions = [];\n      options.forEach(function (option) {\n        var optionsStack = ancestor.concat(option);\n\n        if (!option[_this4.childrenKey()]) {\n          flatOptions.push(optionsStack);\n        } else {\n          if (_this4.changeOnSelect) {\n            flatOptions.push(optionsStack);\n          }\n\n          flatOptions = flatOptions.concat(_this4.flattenOptions(option[_this4.childrenKey()], optionsStack));\n        }\n      });\n      return flatOptions;\n    }\n  }, {\n    key: 'clearValue',\n    value: function clearValue(e) {\n      e.stopPropagation();\n      this.handlePick([], true);\n    }\n  }, {\n    key: 'handleClickOutside',\n    value: function handleClickOutside() {\n      if (this.state.menuVisible) {\n        this.setState({\n          menuVisible: false\n        });\n      }\n    }\n  }, {\n    key: 'handleClick',\n    value: function handleClick() {\n      if (this.props.disabled) return;\n\n      if (this.filterable) {\n        this.setState({\n          menuVisible: true\n        });\n        return;\n      }\n\n      this.setState({\n        menuVisible: !this.state.menuVisible\n      });\n    }\n    /* Computed Methods */\n\n  }, {\n    key: 'labelKey',\n    value: function labelKey() {\n      return this.props.props.label || 'label';\n    }\n  }, {\n    key: 'valueKey',\n    value: function valueKey() {\n      return this.props.props.value || 'value';\n    }\n  }, {\n    key: 'childrenKey',\n    value: function childrenKey() {\n      return this.props.props.children || 'children';\n    }\n  }, {\n    key: 'currentLabels',\n    value: function currentLabels() {\n      var _this5 = this;\n\n      var options = this.props.options;\n      var labels = [];\n      this.state.currentValue.forEach(function (value) {\n        var targetOption = options && options.filter(function (option) {\n          return option[_this5.valueKey()] === value;\n        })[0];\n\n        if (targetOption) {\n          labels.push(targetOption[_this5.labelKey()]);\n          options = targetOption[_this5.childrenKey()];\n        }\n      });\n      return labels;\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _this6 = this;\n\n      var _props = this.props,\n          size = _props.size,\n          disabled = _props.disabled,\n          filterable = _props.filterable,\n          clearable = _props.clearable,\n          showAllLevels = _props.showAllLevels;\n      var _state = this.state,\n          menuVisible = _state.menuVisible,\n          inputHover = _state.inputHover,\n          inputValue = _state.inputValue;\n      var currentLabels = this.currentLabels();\n      return _react2.default.createElement('span', {\n        ref: 'reference',\n        className: this.className('el-cascader', size ? 'el-cascader--' + size : '', {\n          'is-opened': menuVisible,\n          'is-disabled': disabled\n        })\n      }, _react2.default.createElement('span', {\n        onClick: this.handleClick.bind(this),\n        onMouseEnter: function onMouseEnter() {\n          _this6.setState({\n            inputHover: true\n          });\n        },\n        onMouseLeave: function onMouseLeave() {\n          _this6.setState({\n            inputHover: false\n          });\n        }\n      }, _react2.default.createElement(_input2.default, {\n        ref: 'input',\n        readOnly: !filterable,\n        placeholder: currentLabels.length ? undefined : this.placeholder(),\n        value: inputValue,\n        onChange: function onChange(value) {\n          _this6.setState({\n            inputValue: value\n          });\n        },\n        onKeyUp: this.debouncedInputChange.bind(this),\n        size: size,\n        disabled: disabled,\n        icon: clearable && inputHover && currentLabels.length ? _react2.default.createElement('i', {\n          className: 'el-input__icon el-icon-circle-close el-cascader__clearIcon',\n          onClick: this.clearValue.bind(this)\n        }) : _react2.default.createElement('i', {\n          className: this.classNames('el-input__icon el-icon-caret-bottom', {\n            'is-reverse': menuVisible\n          })\n        })\n      }), _react2.default.createElement(_libs.View, {\n        show: currentLabels.length\n      }, _react2.default.createElement('span', {\n        className: 'el-cascader__label'\n      }, showAllLevels ? currentLabels.map(function (label, index) {\n        return _react2.default.createElement('label', {\n          key: index\n        }, label, index < currentLabels.length - 1 && _react2.default.createElement('span', null, ' / '));\n      }) : currentLabels[currentLabels.length - 1]))), _react2.default.createElement(_Menu2.default, {\n        ref: 'menu'\n      }));\n    }\n  }, {\n    key: '__reactstandin__regenerateByEval',\n    // @ts-ignore\n    value: function __reactstandin__regenerateByEval(key, code) {\n      // @ts-ignore\n      this[key] = eval(code);\n    }\n  }]);\n  return Cascader;\n}(_libs.Component);\n\nCascader.childContextTypes = {\n  component: _libs.PropTypes.any\n};\nCascader.propTypes = {\n  options: _libs.PropTypes.arrayOf(_libs.PropTypes.shape({\n    value: _libs.PropTypes.string\n  })).isRequired,\n  props: _libs.PropTypes.object,\n  value: _libs.PropTypes.array,\n  placeholder: _libs.PropTypes.string,\n  disabled: _libs.PropTypes.bool,\n  clearable: _libs.PropTypes.bool,\n  changeOnSelect: _libs.PropTypes.bool,\n  popperClass: _libs.PropTypes.string,\n  expandTrigger: _libs.PropTypes.string,\n  filterable: _libs.PropTypes.bool,\n  size: _libs.PropTypes.string,\n  showAllLevels: _libs.PropTypes.bool,\n  debounce: _libs.PropTypes.number,\n  activeItemChange: _libs.PropTypes.func,\n  beforeFilter: _libs.PropTypes.func,\n  onChange: _libs.PropTypes.func\n};\nCascader.defaultProps = {\n  value: [],\n  clearable: false,\n  expandTrigger: 'click',\n  showAllLevels: true,\n  debounce: 300,\n  props: {\n    children: 'children',\n    label: 'label',\n    value: 'value',\n    disabled: 'disabled'\n  },\n  beforeFilter: function beforeFilter() {\n    return function () {};\n  }\n};\n\nvar _default = (0, _reactClickOutside2.default)(Cascader);\n\nexports.default = _default;\n;\n\n(function () {\n  var reactHotLoader = (typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal : require('react-hot-loader')).default;\n\n  if (!reactHotLoader) {\n    return;\n  }\n\n  reactHotLoader.register(Cascader, 'Cascader', 'src/cascader/Cascader.jsx');\n  reactHotLoader.register(_default, 'default', 'src/cascader/Cascader.jsx');\n})();\n\n;\n\n(function () {\n  var leaveModule = (typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal : require('react-hot-loader')).leaveModule;\n  leaveModule && leaveModule(module);\n})();","map":{"version":3,"sources":["/home/flo/Projects/react/Holirate/node_modules/element-react/dist/npm/es5/src/cascader/Cascader.js"],"names":["Object","defineProperty","exports","value","_classCallCheck2","require","_classCallCheck3","_interopRequireDefault","_createClass2","_createClass3","_possibleConstructorReturn2","_possibleConstructorReturn3","_inherits2","_inherits3","_react","_react2","_reactDom","_reactDom2","_reactClickOutside","_reactClickOutside2","_throttleDebounce","_popper","_popper2","_libs","_Menu","_Menu2","_input","_input2","_locale","_locale2","obj","__esModule","default","enterModule","reactHotLoaderGlobal","module","Cascader","_Component","props","_this","__proto__","getPrototypeOf","call","state","currentValue","menu","menuVisible","inputHover","inputValue","flatOptions","flattenOptions","options","debouncedInputChange","debounce","before","beforeFilter","then","setState","__IS__FLAT__OPTIONS","label","t","disabled","handleInputChange","key","getChildContext","component","componentDidMount","input","findDOMNode","refs","componentWillReceiveProps","componentDidUpdate","showMenu","popperJS","update","placement","modifiers","computeStyle","gpuAcceleration","hideMenu","destroy","componentWillUnmount","placeholder","updatePopper","initMenu","slice","visible","inputWidth","offsetWidth","handleActiveItemChange","activeItemChange","handlePick","close","arguments","length","undefined","onChange","_this2","filteredFlatOptions","filter","optionsStack","some","option","RegExp","test","labelKey","map","optionStack","item","valueKey","renderFilteredOptionLabel","_this3","index","keywordIndex","toLowerCase","indexOf","labelPart","node","highlightKeyword","keyword","split","createElement","className","_this4","ancestor","forEach","concat","childrenKey","push","changeOnSelect","clearValue","e","stopPropagation","handleClickOutside","handleClick","filterable","children","currentLabels","_this5","labels","targetOption","render","_this6","_props","size","clearable","showAllLevels","_state","ref","onClick","bind","onMouseEnter","onMouseLeave","readOnly","onKeyUp","icon","classNames","View","show","__reactstandin__regenerateByEval","code","eval","Component","childContextTypes","PropTypes","any","propTypes","arrayOf","shape","string","isRequired","object","array","bool","popperClass","expandTrigger","number","func","defaultProps","_default","reactHotLoader","register","leaveModule"],"mappings":"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","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require('babel-runtime/helpers/createClass');\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require('babel-runtime/helpers/inherits');\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactDom = require('react-dom');\n\nvar _reactDom2 = _interopRequireDefault(_reactDom);\n\nvar _reactClickOutside = require('react-click-outside');\n\nvar _reactClickOutside2 = _interopRequireDefault(_reactClickOutside);\n\nvar _throttleDebounce = require('throttle-debounce');\n\nvar _popper = require('popper.js');\n\nvar _popper2 = _interopRequireDefault(_popper);\n\nvar _libs = require('../../libs');\n\nvar _Menu = require('./Menu');\n\nvar _Menu2 = _interopRequireDefault(_Menu);\n\nvar _input = require('../input');\n\nvar _input2 = _interopRequireDefault(_input);\n\nvar _locale = require('../locale');\n\nvar _locale2 = _interopRequireDefault(_locale);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n(function () {\n  var enterModule = (typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal : require('react-hot-loader')).enterModule;\n  enterModule && enterModule(module);\n})();\n\nvar Cascader = function (_Component) {\n  (0, _inherits3.default)(Cascader, _Component);\n\n  function Cascader(props) {\n    (0, _classCallCheck3.default)(this, Cascader);\n\n    var _this = (0, _possibleConstructorReturn3.default)(this, (Cascader.__proto__ || Object.getPrototypeOf(Cascader)).call(this, props));\n\n    _this.state = {\n      currentValue: props.value,\n      menu: null,\n      menuVisible: false,\n      inputHover: false,\n      inputValue: '',\n      flatOptions: _this.flattenOptions(props.options)\n    };\n\n    _this.debouncedInputChange = (0, _throttleDebounce.debounce)(props.debounce, function () {\n      var value = _this.state.inputValue;\n      var before = _this.props.beforeFilter(value);\n\n      if (before && before.then) {\n        _this.state.menu.setState({\n          options: [{\n            __IS__FLAT__OPTIONS: true,\n            label: _locale2.default.t('el.cascader.loading'),\n            value: '',\n            disabled: true\n          }]\n        });\n\n        before.then(function () {\n          _this.handleInputChange(value);\n        });\n      } else {\n        _this.handleInputChange(value);\n      }\n    });\n    return _this;\n  }\n\n  (0, _createClass3.default)(Cascader, [{\n    key: 'getChildContext',\n    value: function getChildContext() {\n      return {\n        component: this\n      };\n    }\n  }, {\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      this.input = _reactDom2.default.findDOMNode(this.refs.input);\n    }\n  }, {\n    key: 'componentWillReceiveProps',\n    value: function componentWillReceiveProps(props) {\n      this.setState({\n        currentValue: props.value,\n        flatOptions: this.flattenOptions(props.options)\n      });\n\n      this.state.menu.setState({\n        options: props.options\n      });\n    }\n  }, {\n    key: 'componentDidUpdate',\n    value: function componentDidUpdate(props, state) {\n      var menuVisible = this.state.menuVisible;\n\n\n      if (menuVisible !== state.menuVisible) {\n        if (menuVisible) {\n          this.showMenu();\n\n          if (this.popperJS) {\n            this.popperJS.update();\n          } else {\n            this.popperJS = new _popper2.default(this.input, _reactDom2.default.findDOMNode(this.refs.menu), {\n              placement: 'bottom-start',\n              modifiers: {\n                computeStyle: {\n                  gpuAcceleration: false\n                }\n              }\n            });\n          }\n        } else {\n          this.hideMenu();\n\n          if (this.popperJS) {\n            this.popperJS.destroy();\n          }\n\n          delete this.popperJS;\n        }\n      }\n    }\n  }, {\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {\n      if (this.popperJS) {\n        this.popperJS.destroy();\n      }\n    }\n  }, {\n    key: 'placeholder',\n    value: function placeholder() {\n      return this.props.placeholder || _locale2.default.t('el.cascader.placeholder');\n    }\n  }, {\n    key: 'updatePopper',\n    value: function updatePopper() {\n      if (this.popperJS) {\n        this.popperJS.update();\n      }\n    }\n  }, {\n    key: 'initMenu',\n    value: function initMenu(menu) {\n      this.state.menu = menu;\n    }\n  }, {\n    key: 'showMenu',\n    value: function showMenu() {\n      this.state.menu.setState({\n        value: this.state.currentValue.slice(0),\n        visible: true,\n        options: this.props.options,\n        inputWidth: this.input.offsetWidth - 2\n      });\n    }\n  }, {\n    key: 'hideMenu',\n    value: function hideMenu() {\n      this.setState({ inputValue: '' });\n\n      if (this.state.menu) {\n        this.state.menu.setState({ visible: false });\n      }\n    }\n  }, {\n    key: 'handleActiveItemChange',\n    value: function handleActiveItemChange(value) {\n      this.updatePopper();\n\n      if (this.props.activeItemChange) {\n        this.props.activeItemChange(value);\n      }\n    }\n  }, {\n    key: 'handlePick',\n    value: function handlePick(value) {\n      var close = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n\n      this.setState({\n        currentValue: value\n      });\n\n      if (close) {\n        this.setState({ menuVisible: false });\n      }\n\n      if (this.props.onChange) {\n        this.props.onChange(value);\n      }\n    }\n  }, {\n    key: 'handleInputChange',\n    value: function handleInputChange(value) {\n      var _this2 = this;\n\n      if (!this.state.menuVisible) return;\n\n      var flatOptions = this.state.flatOptions;\n\n      if (!value) {\n        this.state.menu.setState({\n          options: this.props.options\n        });\n        return;\n      }\n\n      var filteredFlatOptions = flatOptions.filter(function (optionsStack) {\n        return optionsStack.some(function (option) {\n          return new RegExp(value, 'i').test(option[_this2.labelKey()]);\n        });\n      });\n\n      if (filteredFlatOptions.length > 0) {\n        filteredFlatOptions = filteredFlatOptions.map(function (optionStack) {\n          return {\n            __IS__FLAT__OPTIONS: true,\n            value: optionStack.map(function (item) {\n              return item[_this2.valueKey()];\n            }),\n            label: _this2.renderFilteredOptionLabel(value, optionStack)\n          };\n        });\n      } else {\n        filteredFlatOptions = [{\n          __IS__FLAT__OPTIONS: true,\n          label: _locale2.default.t('el.cascader.noMatch'),\n          value: '',\n          disabled: true\n        }];\n      }\n\n      this.state.menu.setState({\n        options: filteredFlatOptions\n      });\n    }\n  }, {\n    key: 'renderFilteredOptionLabel',\n    value: function renderFilteredOptionLabel(inputValue, optionsStack) {\n      var _this3 = this;\n\n      return optionsStack.map(function (option, index) {\n        var label = option[_this3.labelKey()];\n        var keywordIndex = label.toLowerCase().indexOf(inputValue.toLowerCase());\n        var labelPart = label.slice(keywordIndex, inputValue.length + keywordIndex);\n        var node = keywordIndex > -1 ? _this3.highlightKeyword(label, labelPart) : label;\n        return index === 0 ? node : [' / ', node];\n      });\n    }\n  }, {\n    key: 'highlightKeyword',\n    value: function highlightKeyword(label, keyword) {\n      return label.split(keyword).map(function (node, index) {\n        return index === 0 ? node : [_react2.default.createElement(\n          'span',\n          { className: 'el-cascader-menu__item__keyword' },\n          keyword\n        ), node];\n      });\n    }\n  }, {\n    key: 'flattenOptions',\n    value: function flattenOptions(options) {\n      var _this4 = this;\n\n      var ancestor = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n\n      var flatOptions = [];\n\n      options.forEach(function (option) {\n        var optionsStack = ancestor.concat(option);\n        if (!option[_this4.childrenKey()]) {\n          flatOptions.push(optionsStack);\n        } else {\n          if (_this4.changeOnSelect) {\n            flatOptions.push(optionsStack);\n          }\n          flatOptions = flatOptions.concat(_this4.flattenOptions(option[_this4.childrenKey()], optionsStack));\n        }\n      });\n\n      return flatOptions;\n    }\n  }, {\n    key: 'clearValue',\n    value: function clearValue(e) {\n      e.stopPropagation();\n\n      this.handlePick([], true);\n    }\n  }, {\n    key: 'handleClickOutside',\n    value: function handleClickOutside() {\n      if (this.state.menuVisible) {\n        this.setState({ menuVisible: false });\n      }\n    }\n  }, {\n    key: 'handleClick',\n    value: function handleClick() {\n      if (this.props.disabled) return;\n\n      if (this.filterable) {\n        this.setState({\n          menuVisible: true\n        });\n        return;\n      }\n\n      this.setState({\n        menuVisible: !this.state.menuVisible\n      });\n    }\n\n    /* Computed Methods */\n\n  }, {\n    key: 'labelKey',\n    value: function labelKey() {\n      return this.props.props.label || 'label';\n    }\n  }, {\n    key: 'valueKey',\n    value: function valueKey() {\n      return this.props.props.value || 'value';\n    }\n  }, {\n    key: 'childrenKey',\n    value: function childrenKey() {\n      return this.props.props.children || 'children';\n    }\n  }, {\n    key: 'currentLabels',\n    value: function currentLabels() {\n      var _this5 = this;\n\n      var options = this.props.options;\n      var labels = [];\n\n      this.state.currentValue.forEach(function (value) {\n        var targetOption = options && options.filter(function (option) {\n          return option[_this5.valueKey()] === value;\n        })[0];\n\n        if (targetOption) {\n          labels.push(targetOption[_this5.labelKey()]);\n          options = targetOption[_this5.childrenKey()];\n        }\n      });\n\n      return labels;\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _this6 = this;\n\n      var _props = this.props,\n          size = _props.size,\n          disabled = _props.disabled,\n          filterable = _props.filterable,\n          clearable = _props.clearable,\n          showAllLevels = _props.showAllLevels;\n      var _state = this.state,\n          menuVisible = _state.menuVisible,\n          inputHover = _state.inputHover,\n          inputValue = _state.inputValue;\n\n      var currentLabels = this.currentLabels();\n\n      return _react2.default.createElement(\n        'span',\n        { ref: 'reference', className: this.className('el-cascader', size ? 'el-cascader--' + size : '', {\n            'is-opened': menuVisible,\n            'is-disabled': disabled\n          }) },\n        _react2.default.createElement(\n          'span',\n          {\n            onClick: this.handleClick.bind(this),\n            onMouseEnter: function onMouseEnter() {\n              _this6.setState({ inputHover: true });\n            },\n            onMouseLeave: function onMouseLeave() {\n              _this6.setState({ inputHover: false });\n            }\n          },\n          _react2.default.createElement(_input2.default, {\n            ref: 'input',\n            readOnly: !filterable,\n            placeholder: currentLabels.length ? undefined : this.placeholder(),\n            value: inputValue,\n            onChange: function onChange(value) {\n              _this6.setState({ inputValue: value });\n            },\n            onKeyUp: this.debouncedInputChange.bind(this),\n            size: size,\n            disabled: disabled,\n            icon: clearable && inputHover && currentLabels.length ? _react2.default.createElement('i', {\n              className: 'el-input__icon el-icon-circle-close el-cascader__clearIcon',\n              onClick: this.clearValue.bind(this)\n            }) : _react2.default.createElement('i', {\n              className: this.classNames('el-input__icon el-icon-caret-bottom', {\n                'is-reverse': menuVisible\n              })\n            })\n          }),\n          _react2.default.createElement(\n            _libs.View,\n            { show: currentLabels.length },\n            _react2.default.createElement(\n              'span',\n              { className: 'el-cascader__label' },\n              showAllLevels ? currentLabels.map(function (label, index) {\n                return _react2.default.createElement(\n                  'label',\n                  { key: index },\n                  label,\n                  index < currentLabels.length - 1 && _react2.default.createElement(\n                    'span',\n                    null,\n                    ' / '\n                  )\n                );\n              }) : currentLabels[currentLabels.length - 1]\n            )\n          )\n        ),\n        _react2.default.createElement(_Menu2.default, { ref: 'menu' })\n      );\n    }\n  }, {\n    key: '__reactstandin__regenerateByEval',\n    // @ts-ignore\n    value: function __reactstandin__regenerateByEval(key, code) {\n      // @ts-ignore\n      this[key] = eval(code);\n    }\n  }]);\n  return Cascader;\n}(_libs.Component);\n\nCascader.childContextTypes = {\n  component: _libs.PropTypes.any\n};\n\nCascader.propTypes = {\n  options: _libs.PropTypes.arrayOf(_libs.PropTypes.shape({\n    value: _libs.PropTypes.string\n  })).isRequired,\n  props: _libs.PropTypes.object,\n  value: _libs.PropTypes.array,\n  placeholder: _libs.PropTypes.string,\n  disabled: _libs.PropTypes.bool,\n  clearable: _libs.PropTypes.bool,\n  changeOnSelect: _libs.PropTypes.bool,\n  popperClass: _libs.PropTypes.string,\n  expandTrigger: _libs.PropTypes.string,\n  filterable: _libs.PropTypes.bool,\n  size: _libs.PropTypes.string,\n  showAllLevels: _libs.PropTypes.bool,\n  debounce: _libs.PropTypes.number,\n  activeItemChange: _libs.PropTypes.func,\n  beforeFilter: _libs.PropTypes.func,\n  onChange: _libs.PropTypes.func\n};\n\nCascader.defaultProps = {\n  value: [],\n  clearable: false,\n  expandTrigger: 'click',\n  showAllLevels: true,\n  debounce: 300,\n  props: {\n    children: 'children',\n    label: 'label',\n    value: 'value',\n    disabled: 'disabled'\n  },\n  beforeFilter: function beforeFilter() {\n    return function () {};\n  }\n};\n\nvar _default = (0, _reactClickOutside2.default)(Cascader);\n\nexports.default = _default;\n;\n\n(function () {\n  var reactHotLoader = (typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal : require('react-hot-loader')).default;\n\n  if (!reactHotLoader) {\n    return;\n  }\n\n  reactHotLoader.register(Cascader, 'Cascader', 'src/cascader/Cascader.jsx');\n  reactHotLoader.register(_default, 'default', 'src/cascader/Cascader.jsx');\n})();\n\n;\n\n(function () {\n  var leaveModule = (typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal : require('react-hot-loader')).leaveModule;\n  leaveModule && leaveModule(module);\n})();"]},"metadata":{},"sourceType":"script"}