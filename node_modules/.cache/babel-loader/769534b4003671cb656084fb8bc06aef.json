{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _defineProperty2 = require('babel-runtime/helpers/defineProperty');\n\nvar _defineProperty3 = _interopRequireDefault(_defineProperty2);\n\nvar _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require('babel-runtime/helpers/createClass');\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require('babel-runtime/helpers/inherits');\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _asyncValidator = require('async-validator');\n\nvar _asyncValidator2 = _interopRequireDefault(_asyncValidator);\n\nvar _libs = require('../../libs');\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\n(function () {\n  var enterModule = (typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal : require('react-hot-loader')).enterModule;\n  enterModule && enterModule(module);\n})();\n\nvar FormItem = function (_Component) {\n  (0, _inherits3.default)(FormItem, _Component);\n\n  function FormItem(props) {\n    (0, _classCallCheck3.default)(this, FormItem);\n\n    var _this = (0, _possibleConstructorReturn3.default)(this, (FormItem.__proto__ || Object.getPrototypeOf(FormItem)).call(this, props));\n\n    _this.state = {\n      error: '',\n      valid: false,\n      validating: false\n    };\n    return _this;\n  }\n\n  (0, _createClass3.default)(FormItem, [{\n    key: 'getChildContext',\n    value: function getChildContext() {\n      return {\n        form: this\n      };\n    }\n  }, {\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      var prop = this.props.prop;\n\n      if (prop) {\n        this.parent().addField(this);\n        this.initialValue = this.getInitialValue();\n      }\n    }\n  }, {\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {\n      this.parent().removeField(this);\n    }\n  }, {\n    key: 'parent',\n    value: function parent() {\n      return this.context.component;\n    }\n  }, {\n    key: 'isRequired',\n    value: function isRequired() {\n      var rules = this.getRules();\n      var isRequired = false;\n\n      if (rules && rules.length) {\n        rules.every(function (rule) {\n          if (rule.required) {\n            isRequired = true;\n            return false;\n          }\n\n          return true;\n        });\n      }\n\n      return isRequired;\n    }\n  }, {\n    key: 'onFieldBlur',\n    value: function onFieldBlur() {\n      this.validate('blur');\n    }\n  }, {\n    key: 'onFieldChange',\n    value: function onFieldChange() {\n      var _this2 = this;\n\n      if (this.validateDisabled) {\n        this.validateDisabled = false;\n        return;\n      }\n\n      setTimeout(function () {\n        _this2.validate('change');\n      });\n    }\n  }, {\n    key: 'validate',\n    value: function validate(trigger, cb) {\n      var _this3 = this;\n\n      var rules = this.getFilteredRule(trigger);\n\n      if (!rules || rules.length === 0) {\n        if (cb instanceof Function) {\n          cb();\n        }\n\n        return true;\n      }\n\n      this.setState({\n        validating: true\n      });\n      var descriptor = (0, _defineProperty3.default)({}, this.props.prop, rules);\n      var validator = new _asyncValidator2.default(descriptor);\n      var model = (0, _defineProperty3.default)({}, this.props.prop, this.fieldValue());\n      validator.validate(model, {\n        firstFields: true\n      }, function (errors) {\n        _this3.setState({\n          error: errors ? errors[0].message : '',\n          validating: false,\n          valid: !errors\n        }, function () {\n          if (cb instanceof Function) {\n            cb(errors);\n          }\n        });\n      });\n    }\n  }, {\n    key: 'getInitialValue',\n    value: function getInitialValue() {\n      var value = this.parent().props.model[this.props.prop];\n\n      if (value === undefined) {\n        return value;\n      } else {\n        return JSON.parse(JSON.stringify(value));\n      }\n    }\n  }, {\n    key: 'resetField',\n    value: function resetField() {\n      var _state = this.state,\n          valid = _state.valid,\n          error = _state.error;\n      valid = true;\n      error = '';\n      this.setState({\n        valid: valid,\n        error: error\n      });\n      var value = this.fieldValue();\n\n      if (Array.isArray(value) && value.length > 0) {\n        this.validateDisabled = true;\n        this.parent().props.model[this.props.prop] = [];\n      } else if (value) {\n        this.validateDisabled = true;\n        this.parent().props.model[this.props.prop] = this.initialValue;\n      }\n    }\n  }, {\n    key: 'getRules',\n    value: function getRules() {\n      var formRules = this.parent().props.rules;\n      var selfRuels = this.props.rules;\n      formRules = formRules ? formRules[this.props.prop] : [];\n      return [].concat(selfRuels || formRules || []);\n    }\n  }, {\n    key: 'getFilteredRule',\n    value: function getFilteredRule(trigger) {\n      var rules = this.getRules();\n      return rules.filter(function (rule) {\n        if (!rule.trigger || trigger === '') return true;\n\n        if (Array.isArray(rule.trigger)) {\n          return rule.trigger.indexOf(trigger) > -1;\n        } else {\n          return rule.trigger === trigger;\n        }\n      }).map(function (rule) {\n        return Object.assign({}, rule);\n      });\n    }\n  }, {\n    key: 'labelStyle',\n    value: function labelStyle() {\n      var ret = {};\n      if (this.parent().props.labelPosition === 'top') return ret;\n      var labelWidth = this.props.labelWidth || this.parent().props.labelWidth;\n\n      if (labelWidth) {\n        ret.width = parseInt(labelWidth);\n      }\n\n      return ret;\n    }\n  }, {\n    key: 'contentStyle',\n    value: function contentStyle() {\n      var ret = {};\n      if (this.parent().props.labelPosition === 'top' || this.parent().props.inline) return ret;\n      var labelWidth = this.props.labelWidth || this.parent().props.labelWidth;\n\n      if (labelWidth) {\n        ret.marginLeft = parseInt(labelWidth);\n      }\n\n      return ret;\n    }\n  }, {\n    key: 'fieldValue',\n    value: function fieldValue() {\n      var model = this.parent().props.model;\n\n      if (!model || !this.props.prop) {\n        return;\n      }\n\n      var temp = this.props.prop.split(':');\n      return temp.length > 1 ? model[temp[0]][temp[1]] : model[this.props.prop];\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _state2 = this.state,\n          error = _state2.error,\n          validating = _state2.validating;\n      var _props = this.props,\n          label = _props.label,\n          required = _props.required;\n      return _react2.default.createElement('div', {\n        style: this.style(),\n        className: this.className('el-form-item', {\n          'is-error': error !== '',\n          'is-validating': validating,\n          'is-required': this.isRequired() || required\n        }),\n        onBlur: this.onFieldBlur.bind(this),\n        onChange: this.onFieldChange.bind(this)\n      }, label && _react2.default.createElement('label', {\n        className: 'el-form-item__label',\n        style: this.labelStyle()\n      }, typeof label === 'string' ? label + this.parent().props.labelSuffix : label), _react2.default.createElement('div', {\n        className: 'el-form-item__content',\n        style: this.contentStyle()\n      }, this.props.children, _react2.default.createElement(_libs.Transition, {\n        name: 'el-zoom-in-top'\n      }, error && _react2.default.createElement('div', {\n        className: 'el-form-item__error'\n      }, error))));\n    }\n  }, {\n    key: '__reactstandin__regenerateByEval',\n    // @ts-ignore\n    value: function __reactstandin__regenerateByEval(key, code) {\n      // @ts-ignore\n      this[key] = eval(code);\n    }\n  }]);\n  return FormItem;\n}(_libs.Component);\n\nvar _default = FormItem;\nexports.default = _default;\nFormItem.contextTypes = {\n  component: _libs.PropTypes.any\n};\nFormItem.childContextTypes = {\n  form: _libs.PropTypes.any\n};\nFormItem.propTypes = {\n  label: _libs.PropTypes.oneOfType([_libs.PropTypes.string, _libs.PropTypes.node]),\n  labelWidth: _libs.PropTypes.oneOfType([_libs.PropTypes.string, _libs.PropTypes.number]),\n  prop: _libs.PropTypes.string,\n  required: _libs.PropTypes.bool,\n  rules: _libs.PropTypes.oneOfType([_libs.PropTypes.object, _libs.PropTypes.array])\n};\n;\n\n(function () {\n  var reactHotLoader = (typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal : require('react-hot-loader')).default;\n\n  if (!reactHotLoader) {\n    return;\n  }\n\n  reactHotLoader.register(FormItem, 'FormItem', 'src/form/FormItem.jsx');\n  reactHotLoader.register(_default, 'default', 'src/form/FormItem.jsx');\n})();\n\n;\n\n(function () {\n  var leaveModule = (typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal : require('react-hot-loader')).leaveModule;\n  leaveModule && leaveModule(module);\n})();","map":{"version":3,"sources":["/home/flo/Projects/react/Holirate/node_modules/element-react/dist/npm/es5/src/form/FormItem.js"],"names":["Object","defineProperty","exports","value","_defineProperty2","require","_defineProperty3","_interopRequireDefault","_classCallCheck2","_classCallCheck3","_createClass2","_createClass3","_possibleConstructorReturn2","_possibleConstructorReturn3","_inherits2","_inherits3","_react","_react2","_asyncValidator","_asyncValidator2","_libs","obj","__esModule","default","enterModule","reactHotLoaderGlobal","module","FormItem","_Component","props","_this","__proto__","getPrototypeOf","call","state","error","valid","validating","key","getChildContext","form","componentDidMount","prop","parent","addField","initialValue","getInitialValue","componentWillUnmount","removeField","context","component","isRequired","rules","getRules","length","every","rule","required","onFieldBlur","validate","onFieldChange","_this2","validateDisabled","setTimeout","trigger","cb","_this3","getFilteredRule","Function","setState","descriptor","validator","model","fieldValue","firstFields","errors","message","undefined","JSON","parse","stringify","resetField","_state","Array","isArray","formRules","selfRuels","concat","filter","indexOf","map","assign","labelStyle","ret","labelPosition","labelWidth","width","parseInt","contentStyle","inline","marginLeft","temp","split","render","_state2","_props","label","createElement","style","className","onBlur","bind","onChange","labelSuffix","children","Transition","name","__reactstandin__regenerateByEval","code","eval","Component","_default","contextTypes","PropTypes","any","childContextTypes","propTypes","oneOfType","string","node","number","bool","object","array","reactHotLoader","register","leaveModule"],"mappings":"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","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _defineProperty2 = require('babel-runtime/helpers/defineProperty');\n\nvar _defineProperty3 = _interopRequireDefault(_defineProperty2);\n\nvar _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require('babel-runtime/helpers/createClass');\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require('babel-runtime/helpers/inherits');\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _asyncValidator = require('async-validator');\n\nvar _asyncValidator2 = _interopRequireDefault(_asyncValidator);\n\nvar _libs = require('../../libs');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n(function () {\n  var enterModule = (typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal : require('react-hot-loader')).enterModule;\n  enterModule && enterModule(module);\n})();\n\nvar FormItem = function (_Component) {\n  (0, _inherits3.default)(FormItem, _Component);\n\n  function FormItem(props) {\n    (0, _classCallCheck3.default)(this, FormItem);\n\n    var _this = (0, _possibleConstructorReturn3.default)(this, (FormItem.__proto__ || Object.getPrototypeOf(FormItem)).call(this, props));\n\n    _this.state = {\n      error: '',\n      valid: false,\n      validating: false\n    };\n    return _this;\n  }\n\n  (0, _createClass3.default)(FormItem, [{\n    key: 'getChildContext',\n    value: function getChildContext() {\n      return {\n        form: this\n      };\n    }\n  }, {\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      var prop = this.props.prop;\n\n\n      if (prop) {\n        this.parent().addField(this);\n\n        this.initialValue = this.getInitialValue();\n      }\n    }\n  }, {\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {\n      this.parent().removeField(this);\n    }\n  }, {\n    key: 'parent',\n    value: function parent() {\n      return this.context.component;\n    }\n  }, {\n    key: 'isRequired',\n    value: function isRequired() {\n      var rules = this.getRules();\n      var isRequired = false;\n\n      if (rules && rules.length) {\n        rules.every(function (rule) {\n          if (rule.required) {\n            isRequired = true;\n\n            return false;\n          }\n          return true;\n        });\n      }\n\n      return isRequired;\n    }\n  }, {\n    key: 'onFieldBlur',\n    value: function onFieldBlur() {\n      this.validate('blur');\n    }\n  }, {\n    key: 'onFieldChange',\n    value: function onFieldChange() {\n      var _this2 = this;\n\n      if (this.validateDisabled) {\n        this.validateDisabled = false;\n\n        return;\n      }\n\n      setTimeout(function () {\n        _this2.validate('change');\n      });\n    }\n  }, {\n    key: 'validate',\n    value: function validate(trigger, cb) {\n      var _this3 = this;\n\n      var rules = this.getFilteredRule(trigger);\n\n      if (!rules || rules.length === 0) {\n        if (cb instanceof Function) {\n          cb();\n        }\n\n        return true;\n      }\n\n      this.setState({ validating: true });\n\n      var descriptor = (0, _defineProperty3.default)({}, this.props.prop, rules);\n      var validator = new _asyncValidator2.default(descriptor);\n      var model = (0, _defineProperty3.default)({}, this.props.prop, this.fieldValue());\n\n      validator.validate(model, { firstFields: true }, function (errors) {\n        _this3.setState({\n          error: errors ? errors[0].message : '',\n          validating: false,\n          valid: !errors\n        }, function () {\n          if (cb instanceof Function) {\n            cb(errors);\n          }\n        });\n      });\n    }\n  }, {\n    key: 'getInitialValue',\n    value: function getInitialValue() {\n      var value = this.parent().props.model[this.props.prop];\n\n      if (value === undefined) {\n        return value;\n      } else {\n        return JSON.parse(JSON.stringify(value));\n      }\n    }\n  }, {\n    key: 'resetField',\n    value: function resetField() {\n      var _state = this.state,\n          valid = _state.valid,\n          error = _state.error;\n\n\n      valid = true;\n      error = '';\n\n      this.setState({ valid: valid, error: error });\n\n      var value = this.fieldValue();\n\n      if (Array.isArray(value) && value.length > 0) {\n        this.validateDisabled = true;\n        this.parent().props.model[this.props.prop] = [];\n      } else if (value) {\n        this.validateDisabled = true;\n        this.parent().props.model[this.props.prop] = this.initialValue;\n      }\n    }\n  }, {\n    key: 'getRules',\n    value: function getRules() {\n      var formRules = this.parent().props.rules;\n      var selfRuels = this.props.rules;\n\n      formRules = formRules ? formRules[this.props.prop] : [];\n      return [].concat(selfRuels || formRules || []);\n    }\n  }, {\n    key: 'getFilteredRule',\n    value: function getFilteredRule(trigger) {\n      var rules = this.getRules();\n\n      return rules.filter(function (rule) {\n        if (!rule.trigger || trigger === '') return true;\n        if (Array.isArray(rule.trigger)) {\n          return rule.trigger.indexOf(trigger) > -1;\n        } else {\n          return rule.trigger === trigger;\n        }\n      }).map(function (rule) {\n        return Object.assign({}, rule);\n      });\n    }\n  }, {\n    key: 'labelStyle',\n    value: function labelStyle() {\n      var ret = {};\n\n      if (this.parent().props.labelPosition === 'top') return ret;\n\n      var labelWidth = this.props.labelWidth || this.parent().props.labelWidth;\n\n      if (labelWidth) {\n        ret.width = parseInt(labelWidth);\n      }\n\n      return ret;\n    }\n  }, {\n    key: 'contentStyle',\n    value: function contentStyle() {\n      var ret = {};\n\n      if (this.parent().props.labelPosition === 'top' || this.parent().props.inline) return ret;\n\n      var labelWidth = this.props.labelWidth || this.parent().props.labelWidth;\n\n      if (labelWidth) {\n        ret.marginLeft = parseInt(labelWidth);\n      }\n\n      return ret;\n    }\n  }, {\n    key: 'fieldValue',\n    value: function fieldValue() {\n      var model = this.parent().props.model;\n      if (!model || !this.props.prop) {\n        return;\n      }\n      var temp = this.props.prop.split(':');\n      return temp.length > 1 ? model[temp[0]][temp[1]] : model[this.props.prop];\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _state2 = this.state,\n          error = _state2.error,\n          validating = _state2.validating;\n      var _props = this.props,\n          label = _props.label,\n          required = _props.required;\n\n\n      return _react2.default.createElement(\n        'div',\n        { style: this.style(), className: this.className('el-form-item', {\n            'is-error': error !== '',\n            'is-validating': validating,\n            'is-required': this.isRequired() || required\n          }), onBlur: this.onFieldBlur.bind(this), onChange: this.onFieldChange.bind(this) },\n        label && _react2.default.createElement(\n          'label',\n          { className: 'el-form-item__label', style: this.labelStyle() },\n          typeof label === 'string' ? label + this.parent().props.labelSuffix : label\n        ),\n        _react2.default.createElement(\n          'div',\n          { className: 'el-form-item__content', style: this.contentStyle() },\n          this.props.children,\n          _react2.default.createElement(\n            _libs.Transition,\n            { name: 'el-zoom-in-top' },\n            error && _react2.default.createElement(\n              'div',\n              { className: 'el-form-item__error' },\n              error\n            )\n          )\n        )\n      );\n    }\n  }, {\n    key: '__reactstandin__regenerateByEval',\n    // @ts-ignore\n    value: function __reactstandin__regenerateByEval(key, code) {\n      // @ts-ignore\n      this[key] = eval(code);\n    }\n  }]);\n  return FormItem;\n}(_libs.Component);\n\nvar _default = FormItem;\nexports.default = _default;\n\n\nFormItem.contextTypes = {\n  component: _libs.PropTypes.any\n};\n\nFormItem.childContextTypes = {\n  form: _libs.PropTypes.any\n};\n\nFormItem.propTypes = {\n  label: _libs.PropTypes.oneOfType([_libs.PropTypes.string, _libs.PropTypes.node]),\n  labelWidth: _libs.PropTypes.oneOfType([_libs.PropTypes.string, _libs.PropTypes.number]),\n  prop: _libs.PropTypes.string,\n  required: _libs.PropTypes.bool,\n  rules: _libs.PropTypes.oneOfType([_libs.PropTypes.object, _libs.PropTypes.array])\n};\n;\n\n(function () {\n  var reactHotLoader = (typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal : require('react-hot-loader')).default;\n\n  if (!reactHotLoader) {\n    return;\n  }\n\n  reactHotLoader.register(FormItem, 'FormItem', 'src/form/FormItem.jsx');\n  reactHotLoader.register(_default, 'default', 'src/form/FormItem.jsx');\n})();\n\n;\n\n(function () {\n  var leaveModule = (typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal : require('react-hot-loader')).leaveModule;\n  leaveModule && leaveModule(module);\n})();"]},"metadata":{},"sourceType":"script"}