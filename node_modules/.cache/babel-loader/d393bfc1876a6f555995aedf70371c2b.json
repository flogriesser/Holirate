{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _defineProperty2 = require('babel-runtime/helpers/defineProperty');\n\nvar _defineProperty3 = _interopRequireDefault(_defineProperty2);\n\nvar _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require('babel-runtime/helpers/createClass');\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require('babel-runtime/helpers/inherits');\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _libs = require('../../libs');\n\nvar _ajax = require('./ajax');\n\nvar _ajax2 = _interopRequireDefault(_ajax);\n\nvar _Cover = require('./Cover');\n\nvar _Cover2 = _interopRequireDefault(_Cover);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\n(function () {\n  var enterModule = (typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal : require('react-hot-loader')).enterModule;\n  enterModule && enterModule(module);\n})();\n\nvar AjaxUpload = function (_Component) {\n  (0, _inherits3.default)(AjaxUpload, _Component);\n\n  function AjaxUpload(props) {\n    (0, _classCallCheck3.default)(this, AjaxUpload);\n    return (0, _possibleConstructorReturn3.default)(this, (AjaxUpload.__proto__ || Object.getPrototypeOf(AjaxUpload)).call(this, props));\n  }\n\n  (0, _createClass3.default)(AjaxUpload, [{\n    key: 'isImage',\n    value: function isImage(str) {\n      return str.indexOf('image') !== -1;\n    }\n  }, {\n    key: 'handleChange',\n    value: function handleChange(e) {\n      if (e.target instanceof HTMLInputElement) {\n        var files = e.target.files;\n\n        if (!files) {\n          return;\n        }\n\n        this.uploadFiles(files);\n        this.refs.input.value = null;\n      }\n    }\n  }, {\n    key: 'uploadFiles',\n    value: function uploadFiles(files) {\n      var _this2 = this;\n\n      var _props = this.props,\n          multiple = _props.multiple,\n          limit = _props.limit,\n          onExceed = _props.onExceed,\n          fileList = _props.fileList;\n\n      if (limit && fileList.length + files.length > limit) {\n        onExceed && onExceed(files, fileList);\n        return;\n      }\n\n      var postFiles = Array.prototype.slice.call(files);\n\n      if (postFiles.length === 0) {\n        return;\n      }\n\n      if (!multiple) {\n        postFiles = postFiles.slice(0, 1);\n      }\n\n      postFiles.forEach(function (file) {\n        _this2.props.onStart(file);\n\n        if (_this2.props.autoUpload) _this2.upload(file);\n      });\n    }\n  }, {\n    key: 'upload',\n    value: function upload(rawFile, file) {\n      var _this3 = this;\n\n      var beforeUpload = this.props.beforeUpload;\n\n      if (!beforeUpload) {\n        return this.post(rawFile);\n      }\n\n      var before = beforeUpload(rawFile);\n\n      if (before && before.then) {\n        before.then(function (processedFile) {\n          if (Object.prototype.toString.call(processedFile) === '[object File]') {\n            _this3.post(processedFile);\n          } else {\n            _this3.post(rawFile);\n          }\n        }, function () {\n          if (file && typeof _this3.props.onRemove === 'function') _this3.props.onRemove(file);\n        });\n      } else if (before !== false) {\n        this.post(rawFile);\n      } else {\n        if (file && typeof this.props.onRemove === 'function') this.props.onRemove(file);\n      }\n    }\n  }, {\n    key: 'post',\n    value: function post(file) {\n      var _props2 = this.props,\n          filename = _props2.name,\n          headers = _props2.headers,\n          withCredentials = _props2.withCredentials,\n          data = _props2.data,\n          action = _props2.action,\n          _onProgress = _props2.onProgress,\n          _onSuccess = _props2.onSuccess,\n          _onError = _props2.onError;\n      var _props$httpRequest = this.props.httpRequest,\n          httpRequest = _props$httpRequest === undefined ? _ajax2.default : _props$httpRequest;\n      var req = httpRequest({\n        headers: headers,\n        withCredentials: withCredentials,\n        file: file,\n        data: data,\n        filename: filename,\n        action: action,\n        onProgress: function onProgress(e) {\n          return _onProgress(e, file);\n        },\n        onSuccess: function onSuccess(res) {\n          return _onSuccess(res, file);\n        },\n        onError: function onError(err) {\n          return _onError(err, file);\n        }\n      });\n\n      if (req && req.then) {\n        req.then(_onSuccess, _onError);\n      }\n    }\n  }, {\n    key: 'handleClick',\n    value: function handleClick() {\n      if (!this.props.disabled) {\n        this.refs.input.click();\n      }\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _this4 = this;\n\n      var _props3 = this.props,\n          drag = _props3.drag,\n          multiple = _props3.multiple,\n          accept = _props3.accept,\n          listType = _props3.listType,\n          disabled = _props3.disabled;\n      return _react2.default.createElement('div', {\n        className: this.classNames((0, _defineProperty3.default)({\n          'el-upload': true\n        }, 'el-upload--' + listType, true)),\n        onClick: function onClick() {\n          return _this4.handleClick();\n        }\n      }, drag ? _react2.default.createElement(_Cover2.default, {\n        disabled: disabled,\n        onFile: function onFile(file) {\n          return _this4.uploadFiles(file);\n        }\n      }, this.props.children) : this.props.children, _react2.default.createElement('input', {\n        className: 'el-upload__input',\n        type: 'file',\n        ref: 'input',\n        onChange: function onChange(e) {\n          return _this4.handleChange(e);\n        },\n        multiple: multiple,\n        accept: accept\n      }));\n    }\n  }, {\n    key: '__reactstandin__regenerateByEval',\n    // @ts-ignore\n    value: function __reactstandin__regenerateByEval(key, code) {\n      // @ts-ignore\n      this[key] = eval(code);\n    }\n  }]);\n  return AjaxUpload;\n}(_libs.Component);\n\nAjaxUpload.defaultProps = {\n  name: 'file'\n};\nvar _default = AjaxUpload;\nexports.default = _default;\nAjaxUpload.propTypes = {\n  drag: _libs.PropTypes.bool,\n  data: _libs.PropTypes.object,\n  action: _libs.PropTypes.string.isRequired,\n  name: _libs.PropTypes.string,\n  accept: _libs.PropTypes.string,\n  headers: _libs.PropTypes.object,\n  withCredentials: _libs.PropTypes.bool,\n  multiple: _libs.PropTypes.bool,\n  onStart: _libs.PropTypes.func,\n  onProgress: _libs.PropTypes.func,\n  onSuccess: _libs.PropTypes.func,\n  onError: _libs.PropTypes.func,\n  beforeUpload: _libs.PropTypes.func,\n  autoUpload: _libs.PropTypes.bool,\n  listType: _libs.PropTypes.string,\n  fileList: _libs.PropTypes.array,\n  disabled: _libs.PropTypes.bool,\n  limit: _libs.PropTypes.number,\n  onExceed: _libs.PropTypes.func,\n  httpRequest: _libs.PropTypes.func\n};\n;\n\n(function () {\n  var reactHotLoader = (typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal : require('react-hot-loader')).default;\n\n  if (!reactHotLoader) {\n    return;\n  }\n\n  reactHotLoader.register(AjaxUpload, 'AjaxUpload', 'src/upload/AjaxUpload.jsx');\n  reactHotLoader.register(_default, 'default', 'src/upload/AjaxUpload.jsx');\n})();\n\n;\n\n(function () {\n  var leaveModule = (typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal : require('react-hot-loader')).leaveModule;\n  leaveModule && leaveModule(module);\n})();","map":{"version":3,"sources":["/home/flo/Projects/react/Holirate/node_modules/element-react/dist/npm/es5/src/upload/AjaxUpload.js"],"names":["Object","defineProperty","exports","value","_defineProperty2","require","_defineProperty3","_interopRequireDefault","_classCallCheck2","_classCallCheck3","_createClass2","_createClass3","_possibleConstructorReturn2","_possibleConstructorReturn3","_inherits2","_inherits3","_react","_react2","_libs","_ajax","_ajax2","_Cover","_Cover2","obj","__esModule","default","enterModule","reactHotLoaderGlobal","module","AjaxUpload","_Component","props","__proto__","getPrototypeOf","call","key","isImage","str","indexOf","handleChange","e","target","HTMLInputElement","files","uploadFiles","refs","input","_this2","_props","multiple","limit","onExceed","fileList","length","postFiles","Array","prototype","slice","forEach","file","onStart","autoUpload","upload","rawFile","_this3","beforeUpload","post","before","then","processedFile","toString","onRemove","_props2","filename","name","headers","withCredentials","data","action","_onProgress","onProgress","_onSuccess","onSuccess","_onError","onError","_props$httpRequest","httpRequest","undefined","req","res","err","handleClick","disabled","click","render","_this4","_props3","drag","accept","listType","createElement","className","classNames","onClick","onFile","children","type","ref","onChange","__reactstandin__regenerateByEval","code","eval","Component","defaultProps","_default","propTypes","PropTypes","bool","object","string","isRequired","func","array","number","reactHotLoader","register","leaveModule"],"mappings":"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","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _defineProperty2 = require('babel-runtime/helpers/defineProperty');\n\nvar _defineProperty3 = _interopRequireDefault(_defineProperty2);\n\nvar _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require('babel-runtime/helpers/createClass');\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require('babel-runtime/helpers/inherits');\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _libs = require('../../libs');\n\nvar _ajax = require('./ajax');\n\nvar _ajax2 = _interopRequireDefault(_ajax);\n\nvar _Cover = require('./Cover');\n\nvar _Cover2 = _interopRequireDefault(_Cover);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n(function () {\n  var enterModule = (typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal : require('react-hot-loader')).enterModule;\n  enterModule && enterModule(module);\n})();\n\nvar AjaxUpload = function (_Component) {\n  (0, _inherits3.default)(AjaxUpload, _Component);\n\n  function AjaxUpload(props) {\n    (0, _classCallCheck3.default)(this, AjaxUpload);\n    return (0, _possibleConstructorReturn3.default)(this, (AjaxUpload.__proto__ || Object.getPrototypeOf(AjaxUpload)).call(this, props));\n  }\n\n  (0, _createClass3.default)(AjaxUpload, [{\n    key: 'isImage',\n    value: function isImage(str) {\n      return str.indexOf('image') !== -1;\n    }\n  }, {\n    key: 'handleChange',\n    value: function handleChange(e) {\n      if (e.target instanceof HTMLInputElement) {\n        var files = e.target.files;\n        if (!files) {\n          return;\n        }\n        this.uploadFiles(files);\n        this.refs.input.value = null;\n      }\n    }\n  }, {\n    key: 'uploadFiles',\n    value: function uploadFiles(files) {\n      var _this2 = this;\n\n      var _props = this.props,\n          multiple = _props.multiple,\n          limit = _props.limit,\n          onExceed = _props.onExceed,\n          fileList = _props.fileList;\n\n      if (limit && fileList.length + files.length > limit) {\n        onExceed && onExceed(files, fileList);\n        return;\n      }\n      var postFiles = Array.prototype.slice.call(files);\n      if (postFiles.length === 0) {\n        return;\n      }\n      if (!multiple) {\n        postFiles = postFiles.slice(0, 1);\n      }\n      postFiles.forEach(function (file) {\n        _this2.props.onStart(file);\n        if (_this2.props.autoUpload) _this2.upload(file);\n      });\n    }\n  }, {\n    key: 'upload',\n    value: function upload(rawFile, file) {\n      var _this3 = this;\n\n      var beforeUpload = this.props.beforeUpload;\n\n      if (!beforeUpload) {\n        return this.post(rawFile);\n      }\n      var before = beforeUpload(rawFile);\n      if (before && before.then) {\n        before.then(function (processedFile) {\n          if (Object.prototype.toString.call(processedFile) === '[object File]') {\n            _this3.post(processedFile);\n          } else {\n            _this3.post(rawFile);\n          }\n        }, function () {\n          if (file && typeof _this3.props.onRemove === 'function') _this3.props.onRemove(file);\n        });\n      } else if (before !== false) {\n        this.post(rawFile);\n      } else {\n        if (file && typeof this.props.onRemove === 'function') this.props.onRemove(file);\n      }\n    }\n  }, {\n    key: 'post',\n    value: function post(file) {\n      var _props2 = this.props,\n          filename = _props2.name,\n          headers = _props2.headers,\n          withCredentials = _props2.withCredentials,\n          data = _props2.data,\n          action = _props2.action,\n          _onProgress = _props2.onProgress,\n          _onSuccess = _props2.onSuccess,\n          _onError = _props2.onError;\n      var _props$httpRequest = this.props.httpRequest,\n          httpRequest = _props$httpRequest === undefined ? _ajax2.default : _props$httpRequest;\n\n      var req = httpRequest({\n        headers: headers,\n        withCredentials: withCredentials,\n        file: file,\n        data: data,\n        filename: filename,\n        action: action,\n        onProgress: function onProgress(e) {\n          return _onProgress(e, file);\n        },\n        onSuccess: function onSuccess(res) {\n          return _onSuccess(res, file);\n        },\n        onError: function onError(err) {\n          return _onError(err, file);\n        }\n      });\n      if (req && req.then) {\n        req.then(_onSuccess, _onError);\n      }\n    }\n  }, {\n    key: 'handleClick',\n    value: function handleClick() {\n      if (!this.props.disabled) {\n        this.refs.input.click();\n      }\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _this4 = this;\n\n      var _props3 = this.props,\n          drag = _props3.drag,\n          multiple = _props3.multiple,\n          accept = _props3.accept,\n          listType = _props3.listType,\n          disabled = _props3.disabled;\n\n      return _react2.default.createElement(\n        'div',\n        {\n          className: this.classNames((0, _defineProperty3.default)({\n            'el-upload': true\n          }, 'el-upload--' + listType, true)),\n          onClick: function onClick() {\n            return _this4.handleClick();\n          }\n        },\n        drag ? _react2.default.createElement(\n          _Cover2.default,\n          { disabled: disabled, onFile: function onFile(file) {\n              return _this4.uploadFiles(file);\n            } },\n          this.props.children\n        ) : this.props.children,\n        _react2.default.createElement('input', {\n          className: 'el-upload__input',\n          type: 'file',\n          ref: 'input',\n          onChange: function onChange(e) {\n            return _this4.handleChange(e);\n          },\n          multiple: multiple,\n          accept: accept\n        })\n      );\n    }\n  }, {\n    key: '__reactstandin__regenerateByEval',\n    // @ts-ignore\n    value: function __reactstandin__regenerateByEval(key, code) {\n      // @ts-ignore\n      this[key] = eval(code);\n    }\n  }]);\n  return AjaxUpload;\n}(_libs.Component);\n\nAjaxUpload.defaultProps = {\n  name: 'file'\n};\nvar _default = AjaxUpload;\nexports.default = _default;\n\n\nAjaxUpload.propTypes = {\n  drag: _libs.PropTypes.bool,\n  data: _libs.PropTypes.object,\n  action: _libs.PropTypes.string.isRequired,\n  name: _libs.PropTypes.string,\n  accept: _libs.PropTypes.string,\n  headers: _libs.PropTypes.object,\n  withCredentials: _libs.PropTypes.bool,\n  multiple: _libs.PropTypes.bool,\n  onStart: _libs.PropTypes.func,\n  onProgress: _libs.PropTypes.func,\n  onSuccess: _libs.PropTypes.func,\n  onError: _libs.PropTypes.func,\n  beforeUpload: _libs.PropTypes.func,\n  autoUpload: _libs.PropTypes.bool,\n  listType: _libs.PropTypes.string,\n  fileList: _libs.PropTypes.array,\n  disabled: _libs.PropTypes.bool,\n  limit: _libs.PropTypes.number,\n  onExceed: _libs.PropTypes.func,\n  httpRequest: _libs.PropTypes.func\n};\n;\n\n(function () {\n  var reactHotLoader = (typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal : require('react-hot-loader')).default;\n\n  if (!reactHotLoader) {\n    return;\n  }\n\n  reactHotLoader.register(AjaxUpload, 'AjaxUpload', 'src/upload/AjaxUpload.jsx');\n  reactHotLoader.register(_default, 'default', 'src/upload/AjaxUpload.jsx');\n})();\n\n;\n\n(function () {\n  var leaveModule = (typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal : require('react-hot-loader')).leaveModule;\n  leaveModule && leaveModule(module);\n})();"]},"metadata":{},"sourceType":"script"}