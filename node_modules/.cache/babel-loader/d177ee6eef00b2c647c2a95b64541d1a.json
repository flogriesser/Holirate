{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require('babel-runtime/helpers/createClass');\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require('babel-runtime/helpers/inherits');\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _libs = require('../../libs');\n\nvar _tooltip = require('../tooltip');\n\nvar _tooltip2 = _interopRequireDefault(_tooltip);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\n(function () {\n  var enterModule = (typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal : require('react-hot-loader')).enterModule;\n  enterModule && enterModule(module);\n})();\n\nvar SliderButton = function (_Component) {\n  (0, _inherits3.default)(SliderButton, _Component);\n\n  function SliderButton(props) {\n    (0, _classCallCheck3.default)(this, SliderButton);\n\n    var _this = (0, _possibleConstructorReturn3.default)(this, (SliderButton.__proto__ || Object.getPrototypeOf(SliderButton)).call(this, props));\n\n    _this.state = {\n      hovering: false,\n      dragging: false,\n      startX: 0,\n      startY: 0,\n      currentX: 0,\n      currentY: 0,\n      startPosition: 0,\n      newPosition: 0\n    };\n    return _this;\n  }\n\n  (0, _createClass3.default)(SliderButton, [{\n    key: 'parent',\n    value: function parent() {\n      return this.context.component;\n    }\n  }, {\n    key: 'handleMouseEnter',\n    value: function handleMouseEnter() {\n      this.setState({\n        hovering: true\n      });\n    }\n  }, {\n    key: 'handleMouseLeave',\n    value: function handleMouseLeave() {\n      this.setState({\n        hovering: false\n      });\n    }\n  }, {\n    key: 'onButtonDown',\n    value: function onButtonDown(event) {\n      if (this.disabled()) return;\n      this.onDragStart(event);\n      window.addEventListener('mousemove', this.onDragging.bind(this));\n      window.addEventListener('mouseup', this.onDragEnd.bind(this));\n      window.addEventListener('contextmenu', this.onDragEnd.bind(this));\n    }\n  }, {\n    key: 'onDragStart',\n    value: function onDragStart(event) {\n      this.setState({\n        dragging: true,\n        startX: event.clientX,\n        startY: event.clientY,\n        startPosition: parseInt(this.currentPosition(), 10)\n      });\n    }\n  }, {\n    key: 'onDragging',\n    value: function onDragging(event) {\n      var _this2 = this;\n\n      var _state = this.state,\n          dragging = _state.dragging,\n          startY = _state.startY,\n          currentY = _state.currentY,\n          currentX = _state.currentX,\n          startX = _state.startX,\n          startPosition = _state.startPosition,\n          newPosition = _state.newPosition;\n      var vertical = this.props.vertical;\n\n      if (dragging) {\n        this.setState({\n          currentX: event.clientX,\n          currentY: event.clientY\n        }, function () {\n          var diff = void 0;\n\n          if (vertical) {\n            diff = (startY - currentY) / _this2.parent().sliderSize() * 100;\n          } else {\n            diff = (currentX - startX) / _this2.parent().sliderSize() * 100;\n          }\n\n          _this2.state.newPosition = startPosition + diff;\n\n          _this2.setPosition(newPosition);\n        });\n      }\n    }\n  }, {\n    key: 'onDragEnd',\n    value: function onDragEnd() {\n      var _this3 = this;\n\n      var _state2 = this.state,\n          dragging = _state2.dragging,\n          newPosition = _state2.newPosition;\n\n      if (dragging) {\n        /*\n         * 防止在 mouseup 后立即触发 click，导致滑块有几率产生一小段位移\n         * 不使用 preventDefault 是因为 mouseup 和 click 没有注册在同一个 DOM 上\n         */\n        setTimeout(function () {\n          _this3.setState({\n            dragging: false\n          }, function () {\n            _this3.setPosition(newPosition);\n          });\n        }, 0);\n        window.removeEventListener('mousemove', this.onDragging.bind(this));\n        window.removeEventListener('mouseup', this.onDragEnd.bind(this));\n        window.removeEventListener('contextmenu', this.onDragEnd.bind(this));\n      }\n    }\n  }, {\n    key: 'setPosition',\n    value: function setPosition(newPosition) {\n      if (newPosition < 0) {\n        newPosition = 0;\n      } else if (newPosition > 100) {\n        newPosition = 100;\n      }\n\n      var lengthPerStep = 100 / ((this.max() - this.min()) / this.step());\n      var steps = Math.round(newPosition / lengthPerStep);\n      var value = steps * lengthPerStep * (this.max() - this.min()) * 0.01 + this.min();\n      this.props.onChange(parseFloat(value.toFixed(this.precision())));\n    }\n    /* Computed Methods */\n\n  }, {\n    key: 'formatValue',\n    value: function formatValue() {\n      var formatTooltip = this.parent().props.formatTooltip;\n\n      if (formatTooltip instanceof Function) {\n        return formatTooltip(this.props.value);\n      }\n\n      return this.props.value;\n    }\n  }, {\n    key: 'disabled',\n    value: function disabled() {\n      return this.parent().props.disabled;\n    }\n  }, {\n    key: 'max',\n    value: function max() {\n      return this.parent().props.max;\n    }\n  }, {\n    key: 'min',\n    value: function min() {\n      return this.parent().props.min;\n    }\n  }, {\n    key: 'step',\n    value: function step() {\n      return this.parent().props.step;\n    }\n  }, {\n    key: 'precision',\n    value: function precision() {\n      return this.parent().state.precision;\n    }\n  }, {\n    key: 'currentPosition',\n    value: function currentPosition() {\n      return (this.props.value - this.min()) / (this.max() - this.min()) * 100 + '%';\n    }\n  }, {\n    key: 'wrapperStyle',\n    value: function wrapperStyle() {\n      return this.props.vertical ? {\n        bottom: this.currentPosition()\n      } : {\n        left: this.currentPosition()\n      };\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _state3 = this.state,\n          hovering = _state3.hovering,\n          dragging = _state3.dragging;\n      return _react2.default.createElement('div', {\n        className: this.classNames('el-slider__button-wrapper', {\n          'hover': hovering,\n          'dragging': dragging\n        }),\n        style: this.wrapperStyle(),\n        onMouseEnter: this.handleMouseEnter.bind(this),\n        onMouseLeave: this.handleMouseLeave.bind(this),\n        onMouseDown: this.onButtonDown.bind(this)\n      }, _react2.default.createElement(_tooltip2.default, {\n        placement: 'top',\n        content: _react2.default.createElement('span', null, this.formatValue()),\n        disabled: !this.parent().props.showTooltip\n      }, _react2.default.createElement('div', {\n        className: this.classNames('el-slider__button', {\n          'hover': hovering,\n          'dragging': dragging\n        })\n      })));\n    }\n  }, {\n    key: '__reactstandin__regenerateByEval',\n    // @ts-ignore\n    value: function __reactstandin__regenerateByEval(key, code) {\n      // @ts-ignore\n      this[key] = eval(code);\n    }\n  }]);\n  return SliderButton;\n}(_libs.Component);\n\nSliderButton.defaultProps = {\n  value: 0\n};\nvar _default = SliderButton;\nexports.default = _default;\nSliderButton.contextTypes = {\n  component: _libs.PropTypes.any\n};\nSliderButton.propTypes = {\n  onChange: _libs.PropTypes.func.isRequired,\n  value: _libs.PropTypes.number,\n  vertical: _libs.PropTypes.bool\n};\n;\n\n(function () {\n  var reactHotLoader = (typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal : require('react-hot-loader')).default;\n\n  if (!reactHotLoader) {\n    return;\n  }\n\n  reactHotLoader.register(SliderButton, 'SliderButton', 'src/slider/Button.jsx');\n  reactHotLoader.register(_default, 'default', 'src/slider/Button.jsx');\n})();\n\n;\n\n(function () {\n  var leaveModule = (typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal : require('react-hot-loader')).leaveModule;\n  leaveModule && leaveModule(module);\n})();","map":{"version":3,"sources":["/home/flo/Projects/react/Holirate/node_modules/element-react/dist/npm/es5/src/slider/Button.js"],"names":["Object","defineProperty","exports","value","_classCallCheck2","require","_classCallCheck3","_interopRequireDefault","_createClass2","_createClass3","_possibleConstructorReturn2","_possibleConstructorReturn3","_inherits2","_inherits3","_react","_react2","_libs","_tooltip","_tooltip2","obj","__esModule","default","enterModule","reactHotLoaderGlobal","module","SliderButton","_Component","props","_this","__proto__","getPrototypeOf","call","state","hovering","dragging","startX","startY","currentX","currentY","startPosition","newPosition","key","parent","context","component","handleMouseEnter","setState","handleMouseLeave","onButtonDown","event","disabled","onDragStart","window","addEventListener","onDragging","bind","onDragEnd","clientX","clientY","parseInt","currentPosition","_this2","_state","vertical","diff","sliderSize","setPosition","_this3","_state2","setTimeout","removeEventListener","lengthPerStep","max","min","step","steps","Math","round","onChange","parseFloat","toFixed","precision","formatValue","formatTooltip","Function","wrapperStyle","bottom","left","render","_state3","createElement","className","classNames","style","onMouseEnter","onMouseLeave","onMouseDown","placement","content","showTooltip","__reactstandin__regenerateByEval","code","eval","Component","defaultProps","_default","contextTypes","PropTypes","any","propTypes","func","isRequired","number","bool","reactHotLoader","register","leaveModule"],"mappings":"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","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require('babel-runtime/helpers/createClass');\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require('babel-runtime/helpers/inherits');\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _libs = require('../../libs');\n\nvar _tooltip = require('../tooltip');\n\nvar _tooltip2 = _interopRequireDefault(_tooltip);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n(function () {\n  var enterModule = (typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal : require('react-hot-loader')).enterModule;\n  enterModule && enterModule(module);\n})();\n\nvar SliderButton = function (_Component) {\n  (0, _inherits3.default)(SliderButton, _Component);\n\n  function SliderButton(props) {\n    (0, _classCallCheck3.default)(this, SliderButton);\n\n    var _this = (0, _possibleConstructorReturn3.default)(this, (SliderButton.__proto__ || Object.getPrototypeOf(SliderButton)).call(this, props));\n\n    _this.state = {\n      hovering: false,\n      dragging: false,\n      startX: 0,\n      startY: 0,\n      currentX: 0,\n      currentY: 0,\n      startPosition: 0,\n      newPosition: 0\n    };\n    return _this;\n  }\n\n  (0, _createClass3.default)(SliderButton, [{\n    key: 'parent',\n    value: function parent() {\n      return this.context.component;\n    }\n  }, {\n    key: 'handleMouseEnter',\n    value: function handleMouseEnter() {\n      this.setState({\n        hovering: true\n      });\n    }\n  }, {\n    key: 'handleMouseLeave',\n    value: function handleMouseLeave() {\n      this.setState({\n        hovering: false\n      });\n    }\n  }, {\n    key: 'onButtonDown',\n    value: function onButtonDown(event) {\n      if (this.disabled()) return;\n\n      this.onDragStart(event);\n\n      window.addEventListener('mousemove', this.onDragging.bind(this));\n      window.addEventListener('mouseup', this.onDragEnd.bind(this));\n      window.addEventListener('contextmenu', this.onDragEnd.bind(this));\n    }\n  }, {\n    key: 'onDragStart',\n    value: function onDragStart(event) {\n      this.setState({\n        dragging: true,\n        startX: event.clientX,\n        startY: event.clientY,\n        startPosition: parseInt(this.currentPosition(), 10)\n      });\n    }\n  }, {\n    key: 'onDragging',\n    value: function onDragging(event) {\n      var _this2 = this;\n\n      var _state = this.state,\n          dragging = _state.dragging,\n          startY = _state.startY,\n          currentY = _state.currentY,\n          currentX = _state.currentX,\n          startX = _state.startX,\n          startPosition = _state.startPosition,\n          newPosition = _state.newPosition;\n      var vertical = this.props.vertical;\n\n      if (dragging) {\n        this.setState({\n          currentX: event.clientX,\n          currentY: event.clientY\n        }, function () {\n          var diff = void 0;\n          if (vertical) {\n            diff = (startY - currentY) / _this2.parent().sliderSize() * 100;\n          } else {\n            diff = (currentX - startX) / _this2.parent().sliderSize() * 100;\n          }\n          _this2.state.newPosition = startPosition + diff;\n          _this2.setPosition(newPosition);\n        });\n      }\n    }\n  }, {\n    key: 'onDragEnd',\n    value: function onDragEnd() {\n      var _this3 = this;\n\n      var _state2 = this.state,\n          dragging = _state2.dragging,\n          newPosition = _state2.newPosition;\n\n      if (dragging) {\n        /*\n         * 防止在 mouseup 后立即触发 click，导致滑块有几率产生一小段位移\n         * 不使用 preventDefault 是因为 mouseup 和 click 没有注册在同一个 DOM 上\n         */\n        setTimeout(function () {\n          _this3.setState({\n            dragging: false\n          }, function () {\n            _this3.setPosition(newPosition);\n          });\n        }, 0);\n\n        window.removeEventListener('mousemove', this.onDragging.bind(this));\n        window.removeEventListener('mouseup', this.onDragEnd.bind(this));\n        window.removeEventListener('contextmenu', this.onDragEnd.bind(this));\n      }\n    }\n  }, {\n    key: 'setPosition',\n    value: function setPosition(newPosition) {\n      if (newPosition < 0) {\n        newPosition = 0;\n      } else if (newPosition > 100) {\n        newPosition = 100;\n      }\n\n      var lengthPerStep = 100 / ((this.max() - this.min()) / this.step());\n      var steps = Math.round(newPosition / lengthPerStep);\n      var value = steps * lengthPerStep * (this.max() - this.min()) * 0.01 + this.min();\n\n      this.props.onChange(parseFloat(value.toFixed(this.precision())));\n    }\n\n    /* Computed Methods */\n\n  }, {\n    key: 'formatValue',\n    value: function formatValue() {\n      var formatTooltip = this.parent().props.formatTooltip;\n\n\n      if (formatTooltip instanceof Function) {\n        return formatTooltip(this.props.value);\n      }\n\n      return this.props.value;\n    }\n  }, {\n    key: 'disabled',\n    value: function disabled() {\n      return this.parent().props.disabled;\n    }\n  }, {\n    key: 'max',\n    value: function max() {\n      return this.parent().props.max;\n    }\n  }, {\n    key: 'min',\n    value: function min() {\n      return this.parent().props.min;\n    }\n  }, {\n    key: 'step',\n    value: function step() {\n      return this.parent().props.step;\n    }\n  }, {\n    key: 'precision',\n    value: function precision() {\n      return this.parent().state.precision;\n    }\n  }, {\n    key: 'currentPosition',\n    value: function currentPosition() {\n      return (this.props.value - this.min()) / (this.max() - this.min()) * 100 + '%';\n    }\n  }, {\n    key: 'wrapperStyle',\n    value: function wrapperStyle() {\n      return this.props.vertical ? { bottom: this.currentPosition() } : { left: this.currentPosition() };\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _state3 = this.state,\n          hovering = _state3.hovering,\n          dragging = _state3.dragging;\n\n\n      return _react2.default.createElement(\n        'div',\n        {\n          className: this.classNames('el-slider__button-wrapper', {\n            'hover': hovering,\n            'dragging': dragging\n          }),\n          style: this.wrapperStyle(),\n          onMouseEnter: this.handleMouseEnter.bind(this),\n          onMouseLeave: this.handleMouseLeave.bind(this),\n          onMouseDown: this.onButtonDown.bind(this) },\n        _react2.default.createElement(\n          _tooltip2.default,\n          {\n            placement: 'top',\n            content: _react2.default.createElement(\n              'span',\n              null,\n              this.formatValue()\n            ),\n            disabled: !this.parent().props.showTooltip\n          },\n          _react2.default.createElement('div', {\n            className: this.classNames('el-slider__button', {\n              'hover': hovering,\n              'dragging': dragging\n            })\n          })\n        )\n      );\n    }\n  }, {\n    key: '__reactstandin__regenerateByEval',\n    // @ts-ignore\n    value: function __reactstandin__regenerateByEval(key, code) {\n      // @ts-ignore\n      this[key] = eval(code);\n    }\n  }]);\n  return SliderButton;\n}(_libs.Component);\n\nSliderButton.defaultProps = {\n  value: 0\n};\nvar _default = SliderButton;\nexports.default = _default;\n\n\nSliderButton.contextTypes = {\n  component: _libs.PropTypes.any\n};\n\nSliderButton.propTypes = {\n  onChange: _libs.PropTypes.func.isRequired,\n  value: _libs.PropTypes.number,\n  vertical: _libs.PropTypes.bool\n};\n;\n\n(function () {\n  var reactHotLoader = (typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal : require('react-hot-loader')).default;\n\n  if (!reactHotLoader) {\n    return;\n  }\n\n  reactHotLoader.register(SliderButton, 'SliderButton', 'src/slider/Button.jsx');\n  reactHotLoader.register(_default, 'default', 'src/slider/Button.jsx');\n})();\n\n;\n\n(function () {\n  var leaveModule = (typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal : require('react-hot-loader')).leaveModule;\n  leaveModule && leaveModule(module);\n})();"]},"metadata":{},"sourceType":"script"}