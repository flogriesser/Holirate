{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends2 = require('babel-runtime/helpers/extends');\n\nvar _extends3 = _interopRequireDefault(_extends2);\n\nvar _defineProperty2 = require('babel-runtime/helpers/defineProperty');\n\nvar _defineProperty3 = _interopRequireDefault(_defineProperty2);\n\nvar _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require('babel-runtime/helpers/createClass');\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require('babel-runtime/helpers/inherits');\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _throttleDebounce = require('throttle-debounce');\n\nvar _libs = require('../../libs');\n\nvar _utils = require('../../libs/utils');\n\nvar _checkbox = require('../checkbox');\n\nvar _checkbox2 = _interopRequireDefault(_checkbox);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\n(function () {\n  var enterModule = (typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal : require('react-hot-loader')).enterModule;\n  enterModule && enterModule(module);\n})();\n\nfunction NodeContent(_ref) {\n  var context = _ref.context,\n      renderContent = _ref.renderContent;\n  var _context$props = context.props,\n      nodeModel = _context$props.nodeModel,\n      treeNode = _context$props.treeNode;\n\n  if (typeof renderContent === 'function') {\n    return renderContent(nodeModel, nodeModel.data, treeNode.store);\n  } else {\n    return _react2.default.createElement('span', {\n      className: 'el-tree-node__label'\n    }, nodeModel.label);\n  }\n}\n\nNodeContent.propTypes = {\n  renderContent: _libs.PropTypes.func,\n  context: _libs.PropTypes.object.isRequired\n};\n\nvar Node = function (_Component) {\n  (0, _inherits3.default)(Node, _Component);\n\n  function Node(props) {\n    (0, _classCallCheck3.default)(this, Node);\n\n    var _this = (0, _possibleConstructorReturn3.default)(this, (Node.__proto__ || Object.getPrototypeOf(Node)).call(this, props));\n\n    _this.state = {\n      childNodeRendered: false,\n      isShowCheckbox: false\n    };\n    _this.state.isShowCheckbox = props.treeNode.isShowCheckbox;\n    _this.oldChecked = false;\n    _this.oldIndeterminate = false;\n    _this.idGen = new _utils.IDGenerator();\n    return _this;\n  }\n\n  (0, _createClass3.default)(Node, [{\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      var _this2 = this,\n          _watchers;\n\n      var nodeModel = this.props.nodeModel;\n      var childrenKey = this.props.options.children || 'children';\n      var triggerChange = (0, _throttleDebounce.debounce)(20, function () {\n        for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n          args[_key] = arguments[_key];\n        }\n\n        if (_this2.isDeconstructed) return;\n\n        _this2.handleSelectChange.apply(_this2, args);\n      });\n      this.loadHandler = this.enhanceLoad(nodeModel);\n      this.watchers = (_watchers = {}, (0, _defineProperty3.default)(_watchers, this.idGen.next(), (0, _utils.watchPropertyChange)(nodeModel, 'indeterminate', function (value) {\n        triggerChange(nodeModel.checked, value);\n      })), (0, _defineProperty3.default)(_watchers, this.idGen.next(), (0, _utils.watchPropertyChange)(nodeModel, 'checked', function (value) {\n        triggerChange(value, nodeModel.indeterminate);\n      })), (0, _defineProperty3.default)(_watchers, this.idGen.next(), (0, _utils.watchPropertyChange)(nodeModel, 'loading', function () {\n        _this2.setState({});\n      })), _watchers);\n\n      if (nodeModel.data != null) {\n        this.watchers[this.idGen.next()] = (0, _utils.watchPropertyChange)(nodeModel.data, childrenKey, function () {\n          nodeModel.updateChildren();\n\n          _this2.setState({}); //force update view\n\n        });\n      }\n    }\n  }, {\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {\n      this.loadHandler(); // clear watchs\n\n      for (var w in this.watchers) {\n        if (this.watchers[w]) {\n          this.watchers[w]();\n        }\n      }\n\n      this.isDeconstructed = true;\n    }\n  }, {\n    key: 'enhanceLoad',\n    value: function enhanceLoad(nodeModel) {\n      var _this3 = this;\n\n      var load = nodeModel.load;\n\n      var enhanced = function enhanced() {\n        for (var _len2 = arguments.length, args = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n          args[_key2] = arguments[_key2];\n        }\n\n        load.apply(null, args);\n\n        _this3.setState({});\n      };\n\n      nodeModel.load = enhanced;\n      return function () {\n        nodeModel.load = load;\n      };\n    }\n  }, {\n    key: 'handleSelectChange',\n    value: function handleSelectChange(checked, indeterminate) {\n      var _props = this.props,\n          onCheckChange = _props.onCheckChange,\n          nodeModel = _props.nodeModel; // !NOTE: 原码是 && 的关系，感觉有bug\n\n      if (this.oldChecked !== checked || this.oldIndeterminate !== indeterminate) {\n        onCheckChange(nodeModel.data, checked, indeterminate);\n        this.setState({}); //force update\n      }\n\n      this.oldChecked = checked;\n      this.oldIndeterminate = indeterminate;\n    }\n  }, {\n    key: 'getNodeKey',\n    value: function getNodeKey(node, otherwise) {\n      var nodeKey = this.props.nodeKey;\n\n      if (nodeKey && node) {\n        return node.data[nodeKey];\n      }\n\n      return otherwise;\n    }\n  }, {\n    key: 'handleClick',\n    value: function handleClick(evt) {\n      if (evt) evt.stopPropagation();\n      var _props2 = this.props,\n          nodeModel = _props2.nodeModel,\n          treeNode = _props2.treeNode;\n      treeNode.setCurrentNode(this);\n\n      if (treeNode.props.expandOnClickNode) {\n        this.handleExpandIconClick();\n      }\n    }\n  }, {\n    key: 'handleExpandIconClick',\n    value: function handleExpandIconClick(evt) {\n      var _this4 = this;\n\n      if (evt) evt.stopPropagation();\n      var _props3 = this.props,\n          nodeModel = _props3.nodeModel,\n          parent = _props3.parent;\n      var _props$treeNode$props = this.props.treeNode.props,\n          onNodeCollapse = _props$treeNode$props.onNodeCollapse,\n          onNodeExpand = _props$treeNode$props.onNodeExpand;\n      if (nodeModel.isLeaf) return;\n\n      if (nodeModel.expanded) {\n        nodeModel.collapse();\n        this.refresh();\n        onNodeCollapse(nodeModel.data, nodeModel, this);\n      } else {\n        nodeModel.expand(function () {\n          _this4.setState({\n            childNodeRendered: true\n          }, function () {\n            onNodeExpand(nodeModel.data, nodeModel, _this4);\n          });\n\n          parent.closeSiblings(nodeModel);\n        });\n      }\n    }\n  }, {\n    key: 'closeSiblings',\n    value: function closeSiblings(exclude) {\n      var _props4 = this.props,\n          treeNode = _props4.treeNode,\n          nodeModel = _props4.nodeModel;\n      if (!treeNode.props.accordion) return;\n      if (nodeModel.isLeaf || !nodeModel.childNodes || !nodeModel.childNodes.length) return;\n      nodeModel.childNodes.filter(function (e) {\n        return e !== exclude;\n      }).forEach(function (e) {\n        return e.collapse();\n      });\n      this.refresh();\n    }\n  }, {\n    key: 'refresh',\n    value: function refresh() {\n      this.setState({});\n    }\n  }, {\n    key: 'handleUserClick',\n    value: function handleUserClick() {\n      var _props$treeNode = this.props.treeNode,\n          nodeModel = _props$treeNode.nodeModel,\n          checkStrictly = _props$treeNode.checkStrictly;\n\n      if (nodeModel.indeterminate) {\n        nodeModel.setChecked(nodeModel.checked, !checkStrictly);\n      }\n    }\n  }, {\n    key: 'handleCheckChange',\n    value: function handleCheckChange(checked) {\n      this.props.nodeModel.setChecked(checked, true);\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _this5 = this;\n\n      var childNodeRendered = this.state.childNodeRendered;\n      var _props5 = this.props,\n          treeNode = _props5.treeNode,\n          nodeModel = _props5.nodeModel,\n          renderContent = _props5.renderContent,\n          isShowCheckbox = _props5.isShowCheckbox;\n      var expanded = nodeModel.expanded;\n      return _react2.default.createElement('div', {\n        onClick: this.handleClick.bind(this),\n        className: this.classNames('el-tree-node', {\n          expanded: childNodeRendered && expanded,\n          'is-current': treeNode.getCurrentNode() === this,\n          'is-hidden': !nodeModel.visible\n        }),\n        style: {\n          display: nodeModel.visible ? '' : 'none'\n        }\n      }, _react2.default.createElement('div', {\n        className: 'el-tree-node__content',\n        style: {\n          paddingLeft: (nodeModel.level - 1) * treeNode.props.indent + 'px'\n        }\n      }, _react2.default.createElement('span', {\n        className: this.classNames('el-tree-node__expand-icon', {\n          'is-leaf': nodeModel.isLeaf,\n          expanded: !nodeModel.isLeaf && expanded\n        }),\n        onClick: this.handleExpandIconClick.bind(this)\n      }), isShowCheckbox && _react2.default.createElement(_checkbox2.default, {\n        checked: nodeModel.checked,\n        onChange: this.handleCheckChange.bind(this),\n        indeterminate: nodeModel.indeterminate,\n        onClick: this.handleUserClick.bind(this)\n      }), nodeModel.loading && _react2.default.createElement('span', {\n        className: 'el-tree-node__loading-icon el-icon-loading'\n      }, ' '), _react2.default.createElement(NodeContent, {\n        nodeModel: nodeModel,\n        renderContent: treeNode.props.renderContent,\n        context: this\n      })), _react2.default.createElement(_libs.CollapseTransition, {\n        isShow: expanded,\n        ref: 'collapse'\n      }, _react2.default.createElement('div', {\n        className: 'el-tree-node__children'\n      }, nodeModel.childNodes.map(function (e, idx) {\n        var props = Object.assign({}, _this5.props, {\n          nodeModel: e,\n          parent: _this5\n        });\n        return _react2.default.createElement(Node, (0, _extends3.default)({}, props, {\n          key: _this5.getNodeKey(e, idx)\n        }));\n      }))));\n    }\n  }, {\n    key: '__reactstandin__regenerateByEval',\n    // @ts-ignore\n    value: function __reactstandin__regenerateByEval(key, code) {\n      // @ts-ignore\n      this[key] = eval(code);\n    }\n  }]);\n  return Node;\n}(_libs.Component);\n\nvar _default = Node;\nexports.default = _default;\nNode.propTypes = {\n  nodeModel: _libs.PropTypes.object,\n  options: _libs.PropTypes.object,\n  treeNode: _libs.PropTypes.object.isRequired,\n  isShowCheckbox: _libs.PropTypes.bool,\n  onCheckChange: _libs.PropTypes.func\n};\nNode.defaultProps = {\n  nodeModel: {},\n  options: {},\n  onCheckChange: function onCheckChange() {}\n};\n;\n\n(function () {\n  var reactHotLoader = (typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal : require('react-hot-loader')).default;\n\n  if (!reactHotLoader) {\n    return;\n  }\n\n  reactHotLoader.register(NodeContent, 'NodeContent', 'src/tree/Node.jsx');\n  reactHotLoader.register(Node, 'Node', 'src/tree/Node.jsx');\n  reactHotLoader.register(_default, 'default', 'src/tree/Node.jsx');\n})();\n\n;\n\n(function () {\n  var leaveModule = (typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal : require('react-hot-loader')).leaveModule;\n  leaveModule && leaveModule(module);\n})();","map":{"version":3,"sources":["/home/flo/Projects/react/Holirate/node_modules/element-react/dist/npm/es5/src/tree/Node.js"],"names":["Object","defineProperty","exports","value","_extends2","require","_extends3","_interopRequireDefault","_defineProperty2","_defineProperty3","_classCallCheck2","_classCallCheck3","_createClass2","_createClass3","_possibleConstructorReturn2","_possibleConstructorReturn3","_inherits2","_inherits3","_react","_react2","_throttleDebounce","_libs","_utils","_checkbox","_checkbox2","obj","__esModule","default","enterModule","reactHotLoaderGlobal","module","NodeContent","_ref","context","renderContent","_context$props","props","nodeModel","treeNode","data","store","createElement","className","label","propTypes","PropTypes","func","object","isRequired","Node","_Component","_this","__proto__","getPrototypeOf","call","state","childNodeRendered","isShowCheckbox","oldChecked","oldIndeterminate","idGen","IDGenerator","key","componentDidMount","_this2","_watchers","childrenKey","options","children","triggerChange","debounce","_len","arguments","length","args","Array","_key","isDeconstructed","handleSelectChange","apply","loadHandler","enhanceLoad","watchers","next","watchPropertyChange","checked","indeterminate","setState","updateChildren","componentWillUnmount","w","_this3","load","enhanced","_len2","_key2","_props","onCheckChange","getNodeKey","node","otherwise","nodeKey","handleClick","evt","stopPropagation","_props2","setCurrentNode","expandOnClickNode","handleExpandIconClick","_this4","_props3","parent","_props$treeNode$props","onNodeCollapse","onNodeExpand","isLeaf","expanded","collapse","refresh","expand","closeSiblings","exclude","_props4","accordion","childNodes","filter","e","forEach","handleUserClick","_props$treeNode","checkStrictly","setChecked","handleCheckChange","render","_this5","_props5","onClick","bind","classNames","getCurrentNode","visible","style","display","paddingLeft","level","indent","onChange","loading","CollapseTransition","isShow","ref","map","idx","assign","__reactstandin__regenerateByEval","code","eval","Component","_default","bool","defaultProps","reactHotLoader","register","leaveModule"],"mappings":"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","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends2 = require('babel-runtime/helpers/extends');\n\nvar _extends3 = _interopRequireDefault(_extends2);\n\nvar _defineProperty2 = require('babel-runtime/helpers/defineProperty');\n\nvar _defineProperty3 = _interopRequireDefault(_defineProperty2);\n\nvar _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require('babel-runtime/helpers/createClass');\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require('babel-runtime/helpers/inherits');\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _throttleDebounce = require('throttle-debounce');\n\nvar _libs = require('../../libs');\n\nvar _utils = require('../../libs/utils');\n\nvar _checkbox = require('../checkbox');\n\nvar _checkbox2 = _interopRequireDefault(_checkbox);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n(function () {\n  var enterModule = (typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal : require('react-hot-loader')).enterModule;\n  enterModule && enterModule(module);\n})();\n\nfunction NodeContent(_ref) {\n  var context = _ref.context,\n      renderContent = _ref.renderContent;\n  var _context$props = context.props,\n      nodeModel = _context$props.nodeModel,\n      treeNode = _context$props.treeNode;\n\n\n  if (typeof renderContent === 'function') {\n    return renderContent(nodeModel, nodeModel.data, treeNode.store);\n  } else {\n    return _react2.default.createElement(\n      'span',\n      { className: 'el-tree-node__label' },\n      nodeModel.label\n    );\n  }\n}\n\nNodeContent.propTypes = {\n  renderContent: _libs.PropTypes.func,\n  context: _libs.PropTypes.object.isRequired\n};\n\nvar Node = function (_Component) {\n  (0, _inherits3.default)(Node, _Component);\n\n  function Node(props) {\n    (0, _classCallCheck3.default)(this, Node);\n\n    var _this = (0, _possibleConstructorReturn3.default)(this, (Node.__proto__ || Object.getPrototypeOf(Node)).call(this, props));\n\n    _this.state = {\n      childNodeRendered: false,\n      isShowCheckbox: false\n    };\n    _this.state.isShowCheckbox = props.treeNode.isShowCheckbox;\n\n    _this.oldChecked = false;\n    _this.oldIndeterminate = false;\n    _this.idGen = new _utils.IDGenerator();\n    return _this;\n  }\n\n  (0, _createClass3.default)(Node, [{\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      var _this2 = this,\n          _watchers;\n\n      var nodeModel = this.props.nodeModel;\n      var childrenKey = this.props.options.children || 'children';\n\n      var triggerChange = (0, _throttleDebounce.debounce)(20, function () {\n        for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n          args[_key] = arguments[_key];\n        }\n\n        if (_this2.isDeconstructed) return;\n        _this2.handleSelectChange.apply(_this2, args);\n      });\n\n      this.loadHandler = this.enhanceLoad(nodeModel);\n      this.watchers = (_watchers = {}, (0, _defineProperty3.default)(_watchers, this.idGen.next(), (0, _utils.watchPropertyChange)(nodeModel, 'indeterminate', function (value) {\n        triggerChange(nodeModel.checked, value);\n      })), (0, _defineProperty3.default)(_watchers, this.idGen.next(), (0, _utils.watchPropertyChange)(nodeModel, 'checked', function (value) {\n        triggerChange(value, nodeModel.indeterminate);\n      })), (0, _defineProperty3.default)(_watchers, this.idGen.next(), (0, _utils.watchPropertyChange)(nodeModel, 'loading', function () {\n        _this2.setState({});\n      })), _watchers);\n\n      if (nodeModel.data != null) {\n        this.watchers[this.idGen.next()] = (0, _utils.watchPropertyChange)(nodeModel.data, childrenKey, function () {\n          nodeModel.updateChildren();\n          _this2.setState({}); //force update view\n        });\n      }\n    }\n  }, {\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {\n      this.loadHandler();\n      // clear watchs\n      for (var w in this.watchers) {\n        if (this.watchers[w]) {\n          this.watchers[w]();\n        }\n      }\n      this.isDeconstructed = true;\n    }\n  }, {\n    key: 'enhanceLoad',\n    value: function enhanceLoad(nodeModel) {\n      var _this3 = this;\n\n      var load = nodeModel.load;\n      var enhanced = function enhanced() {\n        for (var _len2 = arguments.length, args = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n          args[_key2] = arguments[_key2];\n        }\n\n        load.apply(null, args);\n        _this3.setState({});\n      };\n      nodeModel.load = enhanced;\n      return function () {\n        nodeModel.load = load;\n      };\n    }\n  }, {\n    key: 'handleSelectChange',\n    value: function handleSelectChange(checked, indeterminate) {\n      var _props = this.props,\n          onCheckChange = _props.onCheckChange,\n          nodeModel = _props.nodeModel;\n\n      // !NOTE: 原码是 && 的关系，感觉有bug\n\n      if (this.oldChecked !== checked || this.oldIndeterminate !== indeterminate) {\n        onCheckChange(nodeModel.data, checked, indeterminate);\n        this.setState({}); //force update\n      }\n\n      this.oldChecked = checked;\n      this.oldIndeterminate = indeterminate;\n    }\n  }, {\n    key: 'getNodeKey',\n    value: function getNodeKey(node, otherwise) {\n      var nodeKey = this.props.nodeKey;\n      if (nodeKey && node) {\n        return node.data[nodeKey];\n      }\n      return otherwise;\n    }\n  }, {\n    key: 'handleClick',\n    value: function handleClick(evt) {\n      if (evt) evt.stopPropagation();\n      var _props2 = this.props,\n          nodeModel = _props2.nodeModel,\n          treeNode = _props2.treeNode;\n\n\n      treeNode.setCurrentNode(this);\n      if (treeNode.props.expandOnClickNode) {\n        this.handleExpandIconClick();\n      }\n    }\n  }, {\n    key: 'handleExpandIconClick',\n    value: function handleExpandIconClick(evt) {\n      var _this4 = this;\n\n      if (evt) evt.stopPropagation();\n\n      var _props3 = this.props,\n          nodeModel = _props3.nodeModel,\n          parent = _props3.parent;\n      var _props$treeNode$props = this.props.treeNode.props,\n          onNodeCollapse = _props$treeNode$props.onNodeCollapse,\n          onNodeExpand = _props$treeNode$props.onNodeExpand;\n\n\n      if (nodeModel.isLeaf) return;\n\n      if (nodeModel.expanded) {\n        nodeModel.collapse();\n        this.refresh();\n        onNodeCollapse(nodeModel.data, nodeModel, this);\n      } else {\n        nodeModel.expand(function () {\n          _this4.setState({ childNodeRendered: true }, function () {\n            onNodeExpand(nodeModel.data, nodeModel, _this4);\n          });\n          parent.closeSiblings(nodeModel);\n        });\n      }\n    }\n  }, {\n    key: 'closeSiblings',\n    value: function closeSiblings(exclude) {\n      var _props4 = this.props,\n          treeNode = _props4.treeNode,\n          nodeModel = _props4.nodeModel;\n\n      if (!treeNode.props.accordion) return;\n      if (nodeModel.isLeaf || !nodeModel.childNodes || !nodeModel.childNodes.length) return;\n\n      nodeModel.childNodes.filter(function (e) {\n        return e !== exclude;\n      }).forEach(function (e) {\n        return e.collapse();\n      });\n      this.refresh();\n    }\n  }, {\n    key: 'refresh',\n    value: function refresh() {\n      this.setState({});\n    }\n  }, {\n    key: 'handleUserClick',\n    value: function handleUserClick() {\n      var _props$treeNode = this.props.treeNode,\n          nodeModel = _props$treeNode.nodeModel,\n          checkStrictly = _props$treeNode.checkStrictly;\n\n      if (nodeModel.indeterminate) {\n        nodeModel.setChecked(nodeModel.checked, !checkStrictly);\n      }\n    }\n  }, {\n    key: 'handleCheckChange',\n    value: function handleCheckChange(checked) {\n      this.props.nodeModel.setChecked(checked, true);\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _this5 = this;\n\n      var childNodeRendered = this.state.childNodeRendered;\n      var _props5 = this.props,\n          treeNode = _props5.treeNode,\n          nodeModel = _props5.nodeModel,\n          renderContent = _props5.renderContent,\n          isShowCheckbox = _props5.isShowCheckbox;\n\n\n      var expanded = nodeModel.expanded;\n\n      return _react2.default.createElement(\n        'div',\n        {\n          onClick: this.handleClick.bind(this),\n          className: this.classNames('el-tree-node', {\n            expanded: childNodeRendered && expanded,\n            'is-current': treeNode.getCurrentNode() === this,\n            'is-hidden': !nodeModel.visible\n          }),\n          style: { display: nodeModel.visible ? '' : 'none' }\n        },\n        _react2.default.createElement(\n          'div',\n          {\n            className: 'el-tree-node__content',\n            style: { paddingLeft: (nodeModel.level - 1) * treeNode.props.indent + 'px' }\n          },\n          _react2.default.createElement('span', {\n            className: this.classNames('el-tree-node__expand-icon', {\n              'is-leaf': nodeModel.isLeaf,\n              expanded: !nodeModel.isLeaf && expanded\n            }),\n            onClick: this.handleExpandIconClick.bind(this)\n          }),\n          isShowCheckbox && _react2.default.createElement(_checkbox2.default, {\n            checked: nodeModel.checked,\n            onChange: this.handleCheckChange.bind(this),\n            indeterminate: nodeModel.indeterminate,\n            onClick: this.handleUserClick.bind(this)\n          }),\n          nodeModel.loading && _react2.default.createElement(\n            'span',\n            { className: 'el-tree-node__loading-icon el-icon-loading' },\n            ' '\n          ),\n          _react2.default.createElement(NodeContent, {\n            nodeModel: nodeModel,\n            renderContent: treeNode.props.renderContent,\n            context: this\n          })\n        ),\n        _react2.default.createElement(\n          _libs.CollapseTransition,\n          { isShow: expanded, ref: 'collapse' },\n          _react2.default.createElement(\n            'div',\n            { className: 'el-tree-node__children' },\n            nodeModel.childNodes.map(function (e, idx) {\n              var props = Object.assign({}, _this5.props, { nodeModel: e, parent: _this5 });\n              return _react2.default.createElement(Node, (0, _extends3.default)({}, props, { key: _this5.getNodeKey(e, idx) }));\n            })\n          )\n        )\n      );\n    }\n  }, {\n    key: '__reactstandin__regenerateByEval',\n    // @ts-ignore\n    value: function __reactstandin__regenerateByEval(key, code) {\n      // @ts-ignore\n      this[key] = eval(code);\n    }\n  }]);\n  return Node;\n}(_libs.Component);\n\nvar _default = Node;\nexports.default = _default;\n\n\nNode.propTypes = {\n  nodeModel: _libs.PropTypes.object,\n  options: _libs.PropTypes.object,\n  treeNode: _libs.PropTypes.object.isRequired,\n  isShowCheckbox: _libs.PropTypes.bool,\n  onCheckChange: _libs.PropTypes.func\n};\n\nNode.defaultProps = {\n  nodeModel: {},\n  options: {},\n  onCheckChange: function onCheckChange() {}\n};\n;\n\n(function () {\n  var reactHotLoader = (typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal : require('react-hot-loader')).default;\n\n  if (!reactHotLoader) {\n    return;\n  }\n\n  reactHotLoader.register(NodeContent, 'NodeContent', 'src/tree/Node.jsx');\n  reactHotLoader.register(Node, 'Node', 'src/tree/Node.jsx');\n  reactHotLoader.register(_default, 'default', 'src/tree/Node.jsx');\n})();\n\n;\n\n(function () {\n  var leaveModule = (typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal : require('react-hot-loader')).leaveModule;\n  leaveModule && leaveModule(module);\n})();"]},"metadata":{},"sourceType":"script"}