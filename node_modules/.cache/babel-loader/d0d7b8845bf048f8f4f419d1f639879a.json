{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _superagent = require('superagent');\n\nvar _superagent2 = _interopRequireDefault(_superagent);\n\nvar _bluebird = require('bluebird');\n\nvar _bluebird2 = _interopRequireDefault(_bluebird);\n\nvar _OrsUtil = require('./OrsUtil');\n\nvar _OrsUtil2 = _interopRequireDefault(_OrsUtil);\n\nvar _constants = require('./constants');\n\nvar _constants2 = _interopRequireDefault(_constants);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _toConsumableArray(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  } else {\n    return Array.from(arr);\n  }\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nvar orsUtil = new _OrsUtil2.default();\n\nvar OrsIsochrones = function () {\n  function OrsIsochrones(args) {\n    _classCallCheck(this, OrsIsochrones);\n\n    this.meta = null;\n    this.args = {};\n\n    if (_constants2.default.propNames.apiKey in args) {\n      this.args[_constants2.default.propNames.apiKey] = args[_constants2.default.propNames.apiKey];\n    } else {\n      // eslint-disable-next-line no-console\n      console.log(_constants2.default.missingAPIKeyMsg);\n    }\n\n    if (_constants2.default.propNames.host in args) {\n      this.args[_constants2.default.propNames.host] = args[_constants2.default.propNames.host];\n    }\n\n    if (_constants2.default.propNames.service in args) {\n      this.args[_constants2.default.propNames.service] = args[_constants2.default.propNames.service];\n    }\n  }\n\n  _createClass(OrsIsochrones, [{\n    key: 'addLocation',\n    value: function addLocation(latlon) {\n      if (!('locations' in this.args)) {\n        this.args.locations = [];\n      }\n\n      this.args.locations.push(latlon);\n    }\n  }, {\n    key: 'getBody',\n    value: function getBody(args) {\n      var options = {};\n\n      if (args.restrictions) {\n        options.profile_params = {\n          restrictions: _extends({}, args.restrictions)\n        };\n        delete args.restrictions;\n      }\n\n      if (args.avoidables) {\n        options.avoid_features = [].concat(_toConsumableArray(args.avoidables));\n        delete args.avoidables;\n      }\n\n      if (args.avoid_polygons) {\n        options.avoid_polygons = _extends({}, args.avoid_polygons);\n        delete args.avoid_polygons;\n      }\n\n      if (Object.keys(options).length > 0) {\n        return _extends({}, args, {\n          options: options\n        });\n      } else {\n        return _extends({}, args);\n      }\n    }\n  }, {\n    key: 'calculate',\n    value: function calculate(reqArgs) {\n      // Get custom header and remove from args\n      this.customHeaders = [];\n\n      if (reqArgs.customHeaders) {\n        this.customHeaders = reqArgs.customHeaders;\n        delete reqArgs.customHeaders;\n      }\n\n      orsUtil.setRequestDefaults(this.args, reqArgs, true); // eslint-disable-next-line prettier/prettier\n\n      if (!this.args[_constants2.default.propNames.service] && !reqArgs[_constants2.default.propNames.service]) {\n        reqArgs.service = 'isochrones';\n      }\n\n      orsUtil.copyProperties(reqArgs, this.args);\n      var that = this;\n      return new _bluebird2.default(function (resolve, reject) {\n        var timeout = that.args[_constants2.default.propNames.timeout] || 10000; // eslint-disable-next-line prettier/prettier\n\n        if (that.args[_constants2.default.propNames.apiVersion] === _constants2.default.defaultAPIVersion) {\n          // meta should be generated once that subsequent requests work\n          if (that.meta == null) {\n            that.meta = orsUtil.prepareMeta(that.args);\n          }\n\n          that.httpArgs = orsUtil.prepareRequest(that.args);\n          var url = orsUtil.prepareUrl(that.meta);\n          var postBody = that.getBody(that.httpArgs);\n          var authorization = that.meta[_constants2.default.propNames.apiKey];\n\n          var orsRequest = _superagent2.default.post(url).send(postBody).set('Authorization', authorization).timeout(timeout);\n\n          for (var key in that.customHeaders) {\n            orsRequest.set(key, that.customHeaders[key]);\n          }\n\n          orsRequest.end(function (err, res) {\n            if (err || !res.ok) {\n              // eslint-disable-next-line no-console\n              console.error(err);\n              reject(err);\n            } else if (res) {\n              resolve(res.body || res.text);\n            }\n          });\n        } else {\n          // eslint-disable-next-line no-console\n          console.error(_constants2.default.useAPIV2Msg);\n        }\n      });\n    }\n  }]);\n\n  return OrsIsochrones;\n}();\n\nexports.default = OrsIsochrones;","map":{"version":3,"sources":["/home/flo/Projects/react/Holirate/node_modules/openrouteservice-js/npm_distribution/OrsIsochrones.js"],"names":["Object","defineProperty","exports","value","_extends","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","_createClass","defineProperties","props","descriptor","enumerable","configurable","writable","Constructor","protoProps","staticProps","_superagent","require","_superagent2","_interopRequireDefault","_bluebird","_bluebird2","_OrsUtil","_OrsUtil2","_constants","_constants2","obj","__esModule","default","_toConsumableArray","arr","Array","isArray","arr2","from","_classCallCheck","instance","TypeError","orsUtil","OrsIsochrones","args","meta","propNames","apiKey","console","log","missingAPIKeyMsg","host","service","addLocation","latlon","locations","push","getBody","options","restrictions","profile_params","avoidables","avoid_features","concat","avoid_polygons","keys","calculate","reqArgs","customHeaders","setRequestDefaults","copyProperties","that","resolve","reject","timeout","apiVersion","defaultAPIVersion","prepareMeta","httpArgs","prepareRequest","url","prepareUrl","postBody","authorization","orsRequest","post","send","set","end","err","res","ok","error","body","text","useAPIV2Msg"],"mappings":"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","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _superagent = require('superagent');\n\nvar _superagent2 = _interopRequireDefault(_superagent);\n\nvar _bluebird = require('bluebird');\n\nvar _bluebird2 = _interopRequireDefault(_bluebird);\n\nvar _OrsUtil = require('./OrsUtil');\n\nvar _OrsUtil2 = _interopRequireDefault(_OrsUtil);\n\nvar _constants = require('./constants');\n\nvar _constants2 = _interopRequireDefault(_constants);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar orsUtil = new _OrsUtil2.default();\n\nvar OrsIsochrones = function () {\n  function OrsIsochrones(args) {\n    _classCallCheck(this, OrsIsochrones);\n\n    this.meta = null;\n    this.args = {};\n    if (_constants2.default.propNames.apiKey in args) {\n      this.args[_constants2.default.propNames.apiKey] = args[_constants2.default.propNames.apiKey];\n    } else {\n      // eslint-disable-next-line no-console\n      console.log(_constants2.default.missingAPIKeyMsg);\n    }\n\n    if (_constants2.default.propNames.host in args) {\n      this.args[_constants2.default.propNames.host] = args[_constants2.default.propNames.host];\n    }\n    if (_constants2.default.propNames.service in args) {\n      this.args[_constants2.default.propNames.service] = args[_constants2.default.propNames.service];\n    }\n  }\n\n  _createClass(OrsIsochrones, [{\n    key: 'addLocation',\n    value: function addLocation(latlon) {\n      if (!('locations' in this.args)) {\n        this.args.locations = [];\n      }\n      this.args.locations.push(latlon);\n    }\n  }, {\n    key: 'getBody',\n    value: function getBody(args) {\n      var options = {};\n\n      if (args.restrictions) {\n        options.profile_params = {\n          restrictions: _extends({}, args.restrictions)\n        };\n        delete args.restrictions;\n      }\n      if (args.avoidables) {\n        options.avoid_features = [].concat(_toConsumableArray(args.avoidables));\n        delete args.avoidables;\n      }\n\n      if (args.avoid_polygons) {\n        options.avoid_polygons = _extends({}, args.avoid_polygons);\n        delete args.avoid_polygons;\n      }\n\n      if (Object.keys(options).length > 0) {\n        return _extends({}, args, {\n          options: options\n        });\n      } else {\n        return _extends({}, args);\n      }\n    }\n  }, {\n    key: 'calculate',\n    value: function calculate(reqArgs) {\n      // Get custom header and remove from args\n      this.customHeaders = [];\n      if (reqArgs.customHeaders) {\n        this.customHeaders = reqArgs.customHeaders;\n        delete reqArgs.customHeaders;\n      }\n      orsUtil.setRequestDefaults(this.args, reqArgs, true);\n      // eslint-disable-next-line prettier/prettier\n      if (!this.args[_constants2.default.propNames.service] && !reqArgs[_constants2.default.propNames.service]) {\n        reqArgs.service = 'isochrones';\n      }\n\n      orsUtil.copyProperties(reqArgs, this.args);\n      var that = this;\n\n      return new _bluebird2.default(function (resolve, reject) {\n        var timeout = that.args[_constants2.default.propNames.timeout] || 10000;\n        // eslint-disable-next-line prettier/prettier\n        if (that.args[_constants2.default.propNames.apiVersion] === _constants2.default.defaultAPIVersion) {\n          // meta should be generated once that subsequent requests work\n          if (that.meta == null) {\n            that.meta = orsUtil.prepareMeta(that.args);\n          }\n          that.httpArgs = orsUtil.prepareRequest(that.args);\n          var url = orsUtil.prepareUrl(that.meta);\n\n          var postBody = that.getBody(that.httpArgs);\n          var authorization = that.meta[_constants2.default.propNames.apiKey];\n\n          var orsRequest = _superagent2.default.post(url).send(postBody).set('Authorization', authorization).timeout(timeout);\n\n          for (var key in that.customHeaders) {\n            orsRequest.set(key, that.customHeaders[key]);\n          }\n          orsRequest.end(function (err, res) {\n            if (err || !res.ok) {\n              // eslint-disable-next-line no-console\n              console.error(err);\n              reject(err);\n            } else if (res) {\n              resolve(res.body || res.text);\n            }\n          });\n        } else {\n          // eslint-disable-next-line no-console\n          console.error(_constants2.default.useAPIV2Msg);\n        }\n      });\n    }\n  }]);\n\n  return OrsIsochrones;\n}();\n\nexports.default = OrsIsochrones;"]},"metadata":{},"sourceType":"script"}